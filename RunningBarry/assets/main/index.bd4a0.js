window.__require=function t(e,n,o){function i(s,c){if(!n[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var u="function"==typeof __require&&__require;if(!c&&u)return u(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var p=n[s]={exports:{}};e[s][0].call(p.exports,function(t){return i(e[s][1][t]||t)},p,p.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<o.length;s++)i(o[s]);return i}({API:[function(t,e,n){"use strict";cc._RF.push(e,"46ef0Kv2/lD3KVHLflMGbV1","API"),Object.defineProperty(n,"__esModule",{value:!0}),n.API=void 0;var o=null;window.getGameApis&&(o=window.getGameApis()),n.API={GameAction:function(){o&&o.gameAction()},GetInfo:function(t){void 0===t&&(t=null),o?(o.gameAction(),o.getInfo().then(function(e){t(e)}).catch(function(t){console.log(t)})):t(0)},CreateGame:function(t){void 0===t&&(t=null),o?(o.gameAction(),o.createGame().then(function(e){t(e)}).catch(function(t){console.log(t)})):t(null)},BuySkill:function(t,e){void 0===e&&(e=null),o?(o.gameAction(),o.buySkill(t).then(function(t){e(t)}).catch(function(t){console.log(t)})):e(null)},EquipSkill:function(t,e){void 0===e&&(e=null),o?(o.gameAction(),o.equipSkill(t).then(function(t){e(t)}).catch(function(t){e(!1),console.log(t)})):e(null)},RemoveSkill:function(t,e){void 0===e&&(e=null),o?(o.gameAction(),o.removeSkill(t).then(function(t){e(t)}).catch(function(t){console.log(t)})):e(null)},AddBuff:function(t,e){void 0===e&&(e=null),o?(o.gameAction(),o.addBuff(t).then(function(t){e(t)}).catch(function(t){console.log(t)})):e(null)},NextWave:function(t){void 0===t&&(t=null),o.gameAction(),o.nextWave().then(function(e){t(e)}).catch(function(t){console.log(t)})},KillMonster:function(t,e){void 0===e&&(e=null),o?(o.gameAction(),o.killMonster(t).then(function(t){e(t)}).catch(function(t){console.log(t)})):e(!1)},HitByMonster:function(t,e){void 0===e&&(e=null),o?(o.gameAction(),o.hitByMonster(t).then(function(t){e(t)}).catch(function(t){console.log(t)})):e(!1)},Revive:function(t){void 0===t&&(t=null),o?(o.gameAction(),o.revive().then(function(e){t(e)}).catch(function(t){console.log(t)})):t(!1)},Endgame:function(t){void 0===t&&(t=null),o?(o.gameAction(),o.endgame().then(function(e){t(e)}).catch(function(t){console.log(t)})):t(!1)}},cc._RF.pop()},{}],AudioManager:[function(t,e,n){"use strict";cc._RF.push(e,"5c6413daoZNDbuGkk1xqW8n","AudioManager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/SingletonNode"),s=cc._decorator,c=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){},e=i([c],e)}(r.default()));n.default=a,cc._RF.pop()},{"../utils/SingletonNode":"SingletonNode"}],BGLoop:[function(t,e,n){"use strict";cc._RF.push(e,"00f12BxhR5A0YuizFtOVf1B","BGLoop");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./GameDefine"),s=t("./GameMgr"),c=t("./EnviromentManager"),a=cc._decorator,u=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=1,e.canMove=!1,e.canvasWidth=0,e}return o(e,t),e.prototype.start=function(){this.canvasWidth=1920,this.speed=c.default.Instance.changeEnvSpeed,this.InitPos()},e.prototype.update=function(t){if(!s.default.Instance.IsPause()&&this.canMove){var e=this.speed;c.default.Instance.isChangingEnviroment&&(e=0);for(var n=e*t*1*r.default.DIR_SPEED,o=0,i=this.node.children;o<i.length;o++){var a=i[o];a.x-=n,a.x<-a.width/2-this.canvasWidth/2&&(a.x+=this.node.children.length*a.width)}}},e.prototype.InitPos=function(){for(var t=0;t<this.node.children.length;t++){this.node.children[t].setPosition(new cc.Vec2(-this.canvasWidth/2+(t+.5)*this.node.children[t].width,0))}},i([p(Number)],e.prototype,"speed",void 0),e=i([u],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./EnviromentManager":"EnviromentManager","./GameDefine":"GameDefine","./GameMgr":"GameMgr"}],BackgroundFade:[function(t,e,n){"use strict";cc._RF.push(e,"d99632dB5RLc78CGdi+FEQc","BackgroundFade");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./GameDefine"),s=t("./GameMgr"),c=t("./MiddleGround"),a=t("../utils/SingletonNode"),u=cc._decorator,p=u.ccclass,l=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Desert=null,e.Mix=null,e.City=null,e.isSwitching=!1,e.currentMode=null,e.nextMode=null,e.totalDistance=0,e.canvasWidth=0,e}return o(e,t),e.prototype.start=function(){this.currentMode=this.Desert,this.canvasWidth=s.default.Instance.CanvasWidth,this.InitPos()},e.prototype.update=function(t){if(this.isSwitching){var e=r.default.SPEED_PLAYER_NORMAL*t*1;this.totalDistance+=e;for(var n=0,o=this.node.children;n<o.length;n++){var i=o[n];i.x-=e,i.x<-(this.canvasWidth-10)&&(i.x+=2*(this.canvasWidth-10),0==this.node.children.indexOf(i)&&(i.getComponent(cc.Sprite).spriteFrame=this.nextMode))}this.totalDistance>=2*(this.canvasWidth-10)&&(this.isSwitching=!1,console.log("done"))}},e.prototype.InitPos=function(){for(var t=0;t<this.node.children.length;t++){var e=this.node.children[t];e.width=this.node.width,e.height=this.node.height,e.setPosition(new cc.Vec2(t*this.canvasWidth-10*t,0)),console.log(e.x)}},e.prototype.swtichBackground=function(){console.log("switchinggg...."),this.isSwitching=!0,this.totalDistance=0;var t=this.node.children[1];this.currentMode==this.Desert?(this.currentMode=this.City,t.setScale(1,1),this.nextMode=this.City):(this.currentMode=this.Desert,t.setScale(-1,1),this.nextMode=this.Desert),c.default.Instance.changeBackground()},i([l(cc.SpriteFrame)],e.prototype,"Desert",void 0),i([l(cc.SpriteFrame)],e.prototype,"Mix",void 0),i([l(cc.SpriteFrame)],e.prototype,"City",void 0),e=i([p],e)}(a.default());n.default=h,cc._RF.pop()},{"../utils/SingletonNode":"SingletonNode","./GameDefine":"GameDefine","./GameMgr":"GameMgr","./MiddleGround":"MiddleGround"}],Bg:[function(t,e,n){"use strict";cc._RF.push(e,"6fb92hSk7VMY7ll3ps/Qt5Z","Bg");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./GameDefine"),s=t("./GameMgr"),c=cc._decorator,a=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mX=0,e.speed=0,e}return o(e,t),e.prototype.onLoad=function(){this.init(),this.Camera=s.default.Instance.Camera},e.prototype.start=function(){},e.prototype.update=function(t){if(!s.default.Instance.IsPause()){for(var e=-this.speed*t*r.default.DIR_SPEED,n=0;n<this.node.children.length;n++)this.node.children[n].setPosition(this.node.children[n].position.add(new cc.Vec3(e,0,0)));for(n=0;n<this.node.children.length;n++)this.node.children[n].x<-this.node.children[n].width&&this.node.children[n].setPosition(this.node.children[n].position.add(new cc.Vec3(this.node.children.length*s.default.Instance.CanvasWidth,0,0)))}},e.prototype.init=function(){this.mX=0;for(var t=this.node.children[0].width,e=0;e<this.node.children.length;e++)this.node.children[e].x=0+e*t},i([u(Number)],e.prototype,"speed",void 0),e=i([a],e)}(cc.Component);n.default=p,cc._RF.pop()},{"./GameDefine":"GameDefine","./GameMgr":"GameMgr"}],BigBg:[function(t,e,n){"use strict";cc._RF.push(e,"45b56grJgtMepdiIfpgO5rx","BigBg");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./GameDefine"),s=t("./GameMgr"),c=cc._decorator,a=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgWidth=0,e.speed=1,e.isDecor=!1,e.isForeGround=!1,e}return o(e,t),e.prototype.start=function(){this.setupPos(),this.speed=r.default.SPEED_PLAYER_NORMAL/this.speed},e.prototype.setupPos=function(){this.isDecor?this.bgWidth=this.getWidth():this.bgWidth=this.node.children[0].width;for(var t=0;t<this.node.children.length;t++)this.node.children[t].setPosition(new cc.Vec2(t*this.bgWidth,this.node.children[t].position.y))},e.prototype.update=function(t){if(!s.default.Instance.IsPause()){for(var e=0,n=this.node.children;e<n.length;e++){(c=n[e]).setPosition(c.position.add(new cc.Vec3(-this.speed*t*r.default.DIR_SPEED,0,0)))}for(var o=0,i=this.node.children;o<i.length;o++){var c;(c=i[o]).position.x<-this.bgWidth-20&&c.setPosition(c.position.add(new cc.Vec3(this.node.children.length*this.bgWidth,0,0)))}}},e.prototype.getWidth=function(){var t=this.node.children[0],e=t.children[t.children.length-1];return e.x+e.width},i([u(Number)],e.prototype,"speed",void 0),i([u(cc.Boolean)],e.prototype,"isDecor",void 0),i([u(cc.Boolean)],e.prototype,"isForeGround",void 0),e=i([a],e)}(cc.Component);n.default=p,cc._RF.pop()},{"./GameDefine":"GameDefine","./GameMgr":"GameMgr"}],ButtonClosePopup:[function(t,e,n){"use strict";cc._RF.push(e,"9f972vFabtHYa7oRHtyDxGt","ButtonClosePopup");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../game/Profile"),s=t("../popup/PopupManager"),c=cc._decorator,a=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,function(){return s.default.pop()}),this.node.on(cc.Node.EventType.TOUCH_START,function(){return r.default.Instance.playButtonSound()})},e=i([a],e)}(cc.Component));n.default=u,cc._RF.pop()},{"../game/Profile":"Profile","../popup/PopupManager":"PopupManager"}],Decoration:[function(t,e,n){"use strict";cc._RF.push(e,"117eaJpLfZDroxrzHTqiVSy","Decoration");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./GameDefine"),s=t("./GameMgr"),c=t("../utils/SingletonNode"),a=t("../utils/Helper"),u=cc._decorator,p=u.ccclass,l=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.decor_desert=[],e.decor_city=[],e.decor_beach=[],e.speed=1,e.currentMode=0,e.currenDecorSet=[],e.canvasWidth=0,e.isStopSpawn=!1,e.totalWidth=0,e}return o(e,t),e.prototype.start=function(){this.speed=r.default.SPEED_PLAYER_NORMAL/this.speed,this.currenDecorSet=this.decor_desert,this.canvasWidth=s.default.Instance.CanvasWidth},e.prototype.update=function(t){if(!s.default.Instance.IsPause())for(var e=this.speed*t*1*r.default.DIR_SPEED,n=0,o=this.node.children;n<o.length;n++){var i=o[n];i.x-=e,i.x<-this.canvasWidth/2&&(i.destroy(),this.totalWidth-=this.canvasWidth/2)}},e.prototype.destroyAll=function(){for(var t=0,e=this.node.children;t<e.length;t++){e[t].destroy()}},e.prototype.spawnNewDecor=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1);for(var n=0;n<e;n++){var o=a.default.RandInt(0,this.currenDecorSet.length-1),i=this.currenDecorSet[o],r=cc.instantiate(i);this.node.addChild(r);r.setPosition(new cc.Vec2(t+n*this.canvasWidth/2)),this.totalWidth+=this.canvasWidth/2}},e.prototype.getPos=function(){return this.node.children[this.node.children.length-1].x+this.canvasWidth/2},e.prototype.stopSpawn=function(t){void 0===t&&(t=!0),this.isStopSpawn=t},e.prototype.changeBackground=function(t){this.currenDecorSet==this.decor_desert?this.currenDecorSet=this.decor_city:this.currenDecorSet==this.decor_city?this.currenDecorSet=this.decor_beach:this.currenDecorSet=this.decor_desert},i([l([cc.Prefab])],e.prototype,"decor_desert",void 0),i([l([cc.Prefab])],e.prototype,"decor_city",void 0),i([l([cc.Prefab])],e.prototype,"decor_beach",void 0),i([l(Number)],e.prototype,"speed",void 0),e=i([p],e)}(c.default());n.default=h,cc._RF.pop()},{"../utils/Helper":"Helper","../utils/SingletonNode":"SingletonNode","./GameDefine":"GameDefine","./GameMgr":"GameMgr"}],1:[function(t,e,n){(function(t,n){"function"==typeof define&&define.amd?define(function(){return n(t,t.document)}):void 0!==e&&e.exports?e.exports=n(t,t.document):t.Shake=n(t,t.document)})("undefined"!=typeof window?window:this,function(t,e){"use strict";function n(n){if(this.hasDeviceMotion="ondevicemotion"in t,this.options={threshold:15,timeout:1e3},"object"==typeof n)for(var o in n)n.hasOwnProperty(o)&&(this.options[o]=n[o]);if(this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null,"function"==typeof e.CustomEvent)this.event=new e.CustomEvent("shake",{bubbles:!0,cancelable:!0});else{if("function"!=typeof e.createEvent)return!1;this.event=e.createEvent("Event"),this.event.initEvent("shake",!0,!0)}}return n.prototype.reset=function(){this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null},n.prototype.start=function(){this.reset(),this.hasDeviceMotion&&t.addEventListener("devicemotion",this,!1)},n.prototype.stop=function(){this.hasDeviceMotion&&t.removeEventListener("devicemotion",this,!1),this.reset()},n.prototype.devicemotion=function(e){var n,o,i,r=e.accelerationIncludingGravity;if(null===this.lastX&&null===this.lastY&&null===this.lastZ)return this.lastX=r.x,this.lastY=r.y,void(this.lastZ=r.z);n=Math.abs(this.lastX-r.x),o=Math.abs(this.lastY-r.y),i=Math.abs(this.lastZ-r.z),(n>this.options.threshold&&o>this.options.threshold||n>this.options.threshold&&i>this.options.threshold||o>this.options.threshold&&i>this.options.threshold)&&(new Date).getTime()-this.lastTime.getTime()>this.options.timeout&&(t.dispatchEvent(this.event),this.lastTime=new Date),this.lastX=r.x,this.lastY=r.y,this.lastZ=r.z},n.prototype.handleEvent=function(t){if("function"==typeof this[t.type])return this[t.type](t)},n})},{}],Effect:[function(t,e,n){"use strict";cc._RF.push(e,"c6211HunWRKg7DWtwBohQOp","Effect");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.EffectType=void 0;var r,s=t("../utils/Helper"),c=t("./GameMgr"),a=cc._decorator,u=a.ccclass,p=a.property;(function(t){t[t.XP=0]="XP",t[t.GIFT=1]="GIFT"})(r=n.EffectType||(n.EffectType={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.XP,e.giftSpriteFrame=[],e}return o(e,t),e.prototype.start=function(){},e.prototype.action=function(t,e,n){void 0===t&&(t=null),void 0===e&&(e=0),void 0===n&&(n=0),this.node.setScale(0);var o=t.position,i=t.parent.position;this.target=new cc.Vec3(o.x+i.x+e/2,o.y+i.y+n/2,0),this.setAction()},e.prototype.actionGift=function(t,e,n,o,i){void 0===t&&(t=null),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=-1),void 0===i&&(i=""),(o=-1)&&(this.getComponent(cc.Sprite).spriteFrame=this.giftSpriteFrame[s.default.RandInt(0,this.giftSpriteFrame.length-1)]),this.node.setScale(0),this.targetNode=this.getChildAvailable(t);var r=this.targetNode.position,c=t.position;this.target=new cc.Vec3(r.x+c.x+e/2,r.y+c.y+n/2,0),this.setAction()},e.prototype.getChildAvailable=function(t){for(var e=0,n=t.children;e<n.length;e++){if((r=n[e]).active&&r.getComponent(cc.Sprite).spriteFrame==this.getComponent(cc.Sprite).spriteFrame)return r}for(var o=0,i=t.children;o<i.length;o++){var r;if(!(r=i[o]).active)return r}return t.children[0]},e.prototype.update=function(t){},e.prototype.setAction=function(){var t=this;switch(this.type){case r.XP:cc.tween(this.node).by(.5,{scale:1.5},{easing:"bounceOut"}).to(1,{scale:1,position:this.target},{easing:"quadOut"}).call(function(){c.default.Instance.Player.killEnemy(1),setTimeout(function(){t.node.destroy()},200)}).start();break;case r.GIFT:cc.tween(this.node).by(.5,{scale:1.5},{easing:"bounceOut"}).to(1,{scale:1,position:this.target},{easing:"quadOut"}).call(function(){t.targetNode.active=!0,t.targetNode.getComponent(cc.Sprite).spriteFrame=t.getComponent(cc.Sprite).spriteFrame,c.default.Instance.Player.killEnemy(1),setTimeout(function(){t.node.destroy()},200)}).start()}},i([p({type:cc.Enum(r)})],e.prototype,"type",void 0),i([p(cc.SpriteFrame)],e.prototype,"giftSpriteFrame",void 0),e=i([u],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../utils/Helper":"Helper","./GameMgr":"GameMgr"}],EnemyDefine:[function(t,e,n){"use strict";cc._RF.push(e,"addcajwU8NNPZ+WVvAT1DVG","EnemyDefine"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=new(function(){return function(){this.DEFAULT=[],this.BOOSTER=[],this.DEFAULT_CROW=[2.5,3.8,5.4,6.1,7.5,7.8,9.1,9.2,10.3,10.3,11.3,11.1,12,11.9,12.7,12.5,13.3,13,13.8,13.5,14.2,13.9,14.5,14.3,14.9,14.6,15.1,14.9,15.4,15.1],this.DEFAULT_SNAKE=[4,5,6.7,7.1,8.6,8.8,10,10,11.1,11,12,11.8,12.7,12.5,13.3,13.1,13.8,13.6,14.3,14,14.7,14.4,15,14.7,15.3,15,15.6,15.3,15.8,15.5],this.DEFAULT_SPIDER=[5,6.7,9.2,10,12.1,12.5,14.4,14.4,16.1,16,17.5,17.3,18.6,18.3,19.6,19.2,20.4,20,21.1,20.7,21.7,21.3,22.2,21.8,22.6,22.2,23.1,22.6,23.4,23],this.BOOSTER_CROW=[1.3,2,3,3.5,4.4,4.8,5.6,5.9,6.6,6.8,7.5,7.7,8.3,8.4,9,9,9.6,9.6,10.1,10.1,10.6,10.6,11.1,11,11.5,11.4,11.8,11.8,12.2,12.1],this.BOOSTER_SNAKE=[2,2.7,3.6,4.2,5,5.4,6.2,6.4,7.1,7.3,8,8.1,8.8,8.8,9.4,9.4,10,10,10.5,10.5,11,11,11.4,11.4,11.8,11.7,12.2,12.1,12.5,12.4],this.BOOSTER_SPIDER=[2.5,3.6,5,5.8,7.1,7.7,8.8,9.3,10.4,10.7,11.7,11.9,12.8,12.9,13.8,13.9,14.7,14.7,15.5,15.5,16.3,16.2,16.9,16.8,17.5,17.4,18,17.9,18.5,18.4],this.DEFAULT=[this.DEFAULT_SPIDER,this.DEFAULT_CROW,this.DEFAULT_SNAKE],this.BOOSTER=[this.BOOSTER_SPIDER,this.BOOSTER_CROW,this.BOOSTER_SNAKE]}}()),cc._RF.pop()},{}],EnemyMgr:[function(t,e,n){"use strict";cc._RF.push(e,"a0f9426HglJfpeVxzzRf0ww","EnemyMgr");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.EnemyTypes=void 0;var r,s=t("./GameDefine"),c=t("./Enemy"),a=t("./GameMgr"),u=t("../utils/Helper"),p=cc._decorator,l=p.ccclass,h=p.property;(function(t){t[t.SPIDER=0]="SPIDER",t[t.CROW=1]="CROW",t[t.SNAKE=2]="SNAKE",t[t.OWL=3]="OWL"})(r=n.EnemyTypes||(n.EnemyTypes={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Prefabs=[],e.Player=null,e}return o(e,t),e.prototype.load=function(){},e.prototype.onLoad=function(){this.load()},e.prototype.spawnEnemy=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=r.SPIDER);var n=this.Prefabs[0],o=0,i=0;switch(t?u.default.RandInt(0,2):e){case r.SPIDER:n=this.Prefabs[0],o=a.default.Instance.CanvasWidth/2,i=a.default.Instance.CanvasHeight+100;break;case r.CROW:n=this.Prefabs[1],o=a.default.Instance.CanvasWidth+100,i=a.default.Instance.CanvasHeight+100;break;case r.SNAKE:n=this.Prefabs[2],o=a.default.Instance.CanvasWidth+100,i=a.default.Instance.Player.node.y}var s=cc.instantiate(n);this.node.addChild(s),s.setPosition(new cc.Vec3(o,i,0)),s.getComponent(c.default).init()},e.prototype.start=function(){var t=this;this.Player=a.default.Instance.Player,setTimeout(function(){t.spawnEnemy(!1,r.SNAKE)},2e3),setTimeout(function(){t.spawnEnemy(!0)},1e3)},e.prototype.update=function(t){this.node.setPosition(this.node.position.add(new cc.Vec3(-s.default.SPEED_PLAYER_NORMAL*t,0,0)))},i([h([cc.Prefab])],e.prototype,"Prefabs",void 0),e=i([l],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../utils/Helper":"Helper","./Enemy":"Enemy","./GameDefine":"GameDefine","./GameMgr":"GameMgr"}],Enemy:[function(t,e,n){"use strict";cc._RF.push(e,"105a9o6FMpCgoTKV756TzYJ","Enemy");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./EnemyMgr"),s=t("./GameMgr"),c=t("./GameDefine"),a=t("../API"),u=t("./Profile"),p=cc._decorator,l=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.EnemyTypes.SPIDER,e.isBoss=!1,e.UI_HP_BAR=null,e.UI_HP_BAR_FILL=null,e.glowBoss=null,e.Spine=null,e.State={IDLE:0,HURT:1,KILL:2,WAIT:3},e.state=0,e.speed=0,e.gravity=0,e.isTouchDown=!1,e.mHp=0,e.Player=null,e.isActive=!1,e.mExp=0,e.UI_HP=null,e.initHP=0,e.score=0,e.direct=null,e.previousSpeed=0,e.currentTrack=null,e.currentAnim="",e.previousAnim="",e.prizeCode="",e.rigidboy=null,e.isPlayedBossSound=!1,e.atk=0,e.reducingHP=!1,e.isFreezing=!1,e.isClaimReward=!1,e.animSet={Attack:"Attack_Animation",Be_Attacked:"Be_attacked_Animation",Death:"Die_Animation",Move:"Attack_Animation",Freeze:"Freeze"},e.monsterId="",e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.setCompleteAnimEvent=function(){var t=this;this.Spine&&this.Spine.setCompleteListener(function(e,n){if(t.currentTrack==e)switch(e.animation?e.animation.name:""){case t.animSet.Attack:break;case t.animSet.Be_Attacked:t.setAnim(t.animSet.Move);break;case t.animSet.Death:if(t.type==r.EnemyTypes.CROW)return;if(t.type==r.EnemyTypes.OWL)return t.Spine.setAnimation(0,"Idle_Animation2",!0),t.direct=new cc.Vec3(-1,.3,0),void(t.isClaimReward=!0);t.node.active=!1,t.node.destroy();break;case t.animSet.Move:}})},e.prototype.setFreeze=function(t){this.type!=r.EnemyTypes.OWL&&this.currentAnim!=this.animSet.Death&&(t?(this.isFreezing=!0,this.setAnim(this.animSet.Freeze)):this.isFreezing&&(this.isFreezing=!1,this.setAnim(this.animSet.Move)))},e.prototype.setAnim=function(t,e){if(void 0===e&&(e=null),this.Spine){var n=!1;switch(t){case this.animSet.Attack:if(this.currentAnim==t)return;this.Spine.timeScale=1,n=!0;break;case this.animSet.Be_Attacked:this.Spine.timeScale=2;break;case this.animSet.Death:this.Spine.timeScale=1;break;case this.animSet.Freeze:if(this.currentAnim==this.animSet.Death)return;this.Spine.timeScale=1;break;case this.animSet.Move:if(this.Spine.timeScale=1,n=!0,this.currentAnim==t)return}this.previousAnim=this.currentAnim,this.currentTrack=this.Spine.setAnimation(0,t,n),this.currentAnim=t}},e.prototype.setAttack=function(){var t=this;this.isFreezing?setTimeout(function(){t.node&&t.setAttack()},200):(a.API.HitByMonster(this.monsterId,function(t){}),s.default.Instance.Player.reduceHP(this.atk),this.setAnim(this.animSet.Attack))},e.prototype.setState=function(t){switch(this.state=t,this.state){case this.State.IDLE:case this.State.HURT:case this.State.KILL:case this.State.WAIT:}},e.prototype.setPositionInit=function(){var t=0;switch(this.type){case r.EnemyTypes.SNAKE:t=s.default.Instance.Player.mRunningPos.y;break;case r.EnemyTypes.CROW:t=s.default.Instance.CanvasHeight;break;case r.EnemyTypes.SPIDER:t=s.default.Instance.CanvasHeight-this.node.height+50;break;case r.EnemyTypes.OWL:t=s.default.Instance.CanvasHeight/2+50}this.node.setPosition(this.node.x,t)},e.prototype.init=function(t,e,n){switch(void 0===e&&(e=!1),this.monsterId=n,this.type){case r.EnemyTypes.SNAKE:this.enemyDefine=c.default.ENEMY_DEFINE_SNAKE,this.animSet.Attack="Attack_Animation",this.animSet.Be_Attacked="Be_Attacked_Animation",this.animSet.Death="Die_Animation",this.animSet.Move="Walk_Animation",this.animSet.Freeze="Freezing";break;case r.EnemyTypes.CROW:this.enemyDefine=c.default.ENEMY_DEFINE_CROW,this.animSet.Attack="Attack_Animation",this.animSet.Be_Attacked="Be_Attacked_Animation",this.animSet.Death="Die_Animation",this.animSet.Move="Flying_Animation";break;case r.EnemyTypes.OWL:this.enemyDefine=c.default.ENEMY_DEFINE_OWL,this.animSet.Attack="Idle_Animation",this.animSet.Be_Attacked="Idle_Animation",this.animSet.Death="Claim_Award_Animation",this.animSet.Move="Idle_Animation";break;case r.EnemyTypes.SPIDER:this.enemyDefine=c.default.ENEMY_DEFINE_SPIDER}var o=s.default.Instance.LevelMgr.waveCount;this.prizeCode=t.prize&&t.prize.code?t.prize.code:"",this.mHp=t.hp,this.initHP=this.mHp,this.score=this.enemyDefine.score,this.speed=this.enemyDefine.baseSpeed,this.speed>this.enemyDefine.maxSpeed&&this.enemyDefine.maxSpeed>0&&(this.speed=this.enemyDefine.maxSpeed),this.speed*=c.default.SPEED_GAME_BASE,this.atk=t.atk,o=o>30?30:o,this.mExp=t.exp,e?(this.isBoss=e,this.node.setScale(c.default.ENEMY_DEFINE_BOSS.sizeMultiplier),this.glowBoss=cc.find("Glow_Boss",this.node),this.glowBoss.active=!0):(this.type,r.EnemyTypes.OWL),this.UI_HP_BAR.active=!0,this.UI_HP_BAR_FILL.active=!0,this.updateHpUI(),this.setAnim(this.animSet.Attack),this.setSlowDown(!1),this.Player=s.default.Instance.Player,this.setPositionInit(),this.setState(this.State.IDLE),this.setCompleteAnimEvent(),this.rigidboy=this.getComponent(cc.RigidBody)},e.prototype.setSlowDown=function(t){this.type!=r.EnemyTypes.OWL&&this.currentAnim!=this.animSet.Death&&(cc.find("Effect",this.node).active=t)},e.prototype.setAction=function(){switch(this.type){case r.EnemyTypes.SNAKE:this.speed+=c.default.SPEED_PLAYER_NORMAL;break;case r.EnemyTypes.CROW:this.speed=1.3*c.default.SPEED_PLAYER_NORMAL;var t=this.node.position,e=this.Player.mRunningPos;this.direct=e.sub(t).normalize();break;case r.EnemyTypes.SPIDER:cc.tween(this.node).to(c.default.ENEMY_SPIDER_DROP_TIME,{y:this.Player.mRunningPos.y+this.Player.node.height-this.Player.node.height/3},{easing:"quadInOut"}).start()}this.isFreezing||this.setAnim(this.animSet.Move),this.isTouchDown=!1,this.updateHpUI()},e.prototype.spawnFx=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=0);var n=new cc.Vec2,o=this.node.getComponent(cc.BoxCollider).world.aabb,i=this.node.position;switch(this.type){case r.EnemyTypes.CROW:n.x=o.x,n.y=o.y;break;case r.EnemyTypes.SNAKE:n.x=o.x,n.y=o.y+o.height/2,i.y+=o.height/2,i.x-=o.width/2;break;case r.EnemyTypes.SPIDER:n.x=o.x,n.y=o.y+o.height/2}t?(s.default.Instance.spawnXpEffect(i,e),this.type==r.EnemyTypes.OWL&&s.default.Instance.spawnGiftEffect(this.node.position,this.prizeCode)):s.default.Instance.spawnBloodFx(n)},e.prototype.reduceHp=function(){var t=this;this.setState(this.State.HURT),this.isFreezing?this.isFreezing=!1:(this.mHp-=this.Player.currentATK,this.spawnFx(),this.updateHpUI()),this.mHp<=0?(this.killed(),s.default.Instance.addScore(this.score),this.setAnim(this.animSet.Death),cc.audioEngine.play(s.default.Instance.enemySwipeAudio,!1,u.default.Instance.volume),cc.audioEngine.play(s.default.Instance.enemtDieAudio,!1,u.default.Instance.volume),this.type==r.EnemyTypes.SNAKE&&(this.speed=c.default.SPEED_PLAYER_NORMAL)):(this.setAnim(this.animSet.Be_Attacked),cc.audioEngine.play(s.default.Instance.enemySwipeAudio,!1,u.default.Instance.volume)),this.type==r.EnemyTypes.OWL&&(this.node.children[0].active=!1,this.node.children[0].active=!0,setTimeout(function(){t.node.children[0].active=!1},300)),null!=this.timeout&&clearTimeout(this.timeout),this.reduceSpeed(),this.timeout=setTimeout(function(){t.mHp<=0||t.setNormalSpeed()},500),this.reducingHP=!0,setTimeout(function(){t.reducingHP=!1},100)},e.prototype.reduceSpeed=function(){if(!(this.mHp<=0)&&0==this.previousSpeed)switch(this.previousSpeed=this.speed,this.type){case r.EnemyTypes.SNAKE:this.speed/=1.3;break;case r.EnemyTypes.CROW:case r.EnemyTypes.SPIDER:this.speed/=1.5}},e.prototype.setNormalSpeed=function(){0!=this.previousSpeed&&(this.speed=this.previousSpeed,this.previousSpeed=0)},e.prototype.killed=function(){a.API.KillMonster(this.monsterId,function(t){}),this.type,r.EnemyTypes.OWL,this.spawnFx(!0,this.mExp),this.die()},e.prototype.die=function(t){if(void 0===t&&(t=!1),this.UI_HP_BAR.active=!1,this.UI_HP_BAR_FILL.active=!1,this.node.getComponent(cc.BoxCollider).enabled=!1,this.setSlowDown(!1),this.glowBoss&&(this.glowBoss.active=!1),null!=this.timeout&&clearTimeout(this.timeout),s.default.Instance.LevelMgr.removeEnemy(this.node),this.isBoss&&s.default.Instance.Ground.spawnWater(),t)return this.node.active=!1,void this.node.destroy();this.Spine&&this.type==r.EnemyTypes.CROW&&(this.rigidboy.type=cc.RigidBodyType.Dynamic,this.direct.y=0)},e.prototype.IsCanSwipe=function(){return this.node.active&&this.state==this.State.IDLE},e.prototype.reset=function(){this.node.active?this.setState(this.State.IDLE):this.setState(this.State.WAIT)},e.prototype.updateHpUI=function(){this.mHp!=this.initHP&&(this.UI_HP_BAR.active=!0,this.UI_HP_BAR_FILL.active=!0);var t=(this.initHP-this.mHp)*this.UI_HP_BAR_FILL.width/this.initHP;this.UI_HP_BAR_FILL.children[0].setPosition(new cc.Vec3(-t,0,0)),this.type==r.EnemyTypes.OWL&&(this.UI_HP_BAR.active=!1,this.UI_HP_BAR_FILL.active=!1)},e.prototype.hardDestroy=function(){this.node.active=!1,this.node.destroy()},e.prototype.update=function(t){if(!s.default.Instance.IsPause()){switch(this.type){case r.EnemyTypes.CROW:if(!this.isActive&&this.node.x<=s.default.Instance.CanvasWidth+this.node.width&&(this.isActive=!0,this.setAction()),this.isActive&&!this.isFreezing){var e=this.direct.x*this.speed*t*c.default.DIR_SPEED,n=this.direct.y*this.speed*t*c.default.DIR_SPEED;this.node.setPosition(this.node.position.add(new cc.Vec3(e,n,0))),this.node.x<=this.Player.node.x&&this.node.y<=this.Player.node.y&&this.die(!0)}else this.node.setPosition(this.node.position.add(new cc.Vec3(-c.default.SPEED_PLAYER_NORMAL*t*c.default.DIR_SPEED,0,0)));this.node.y<=-100&&(this.node.active=!1,this.node.destroy());break;case r.EnemyTypes.SNAKE:!this.isActive&&this.node.x<=s.default.Instance.CanvasWidth+2*this.node.width&&(this.isActive=!0,this.setAction()),this.isActive&&!this.isFreezing?this.node.setPosition(this.node.position.add(new cc.Vec3(-this.speed*t*c.default.DIR_SPEED,0,0))):this.node.setPosition(this.node.position.add(new cc.Vec3(-c.default.SPEED_PLAYER_NORMAL*t*c.default.DIR_SPEED,0,0)));break;case r.EnemyTypes.OWL:this.isClaimReward||(this.direct=new cc.Vec3(-1,0,0));var o=this.direct.x*c.default.SPEED_PLAYER_NORMAL*t*c.default.DIR_SPEED,i=this.direct.y*this.speed*t;this.node.setPosition(this.node.position.add(new cc.Vec3(o,i,0)));break;case r.EnemyTypes.SPIDER:!this.isActive&&this.node.x<=s.default.Instance.CanvasWidth/2+this.node.width+200+s.default.Instance.CanvasWidth/4&&(this.isActive=!0,this.setAction()),this.isActive,this.node.setPosition(this.node.position.add(new cc.Vec3(-c.default.SPEED_PLAYER_NORMAL*t*c.default.DIR_SPEED,0,0)))}this.node.x<s.default.Instance.CanvasWidth&&!this.isPlayedBossSound&&this.type!=r.EnemyTypes.OWL?(this.isPlayedBossSound=!0,s.default.Instance.playerRoarSound()):this.node.x<=-200&&this.die(!0)}},i([h({type:cc.Enum(r.EnemyTypes)})],e.prototype,"type",void 0),i([h(cc.Boolean)],e.prototype,"isBoss",void 0),i([h(cc.Node)],e.prototype,"UI_HP_BAR",void 0),i([h(cc.Node)],e.prototype,"UI_HP_BAR_FILL",void 0),i([h(cc.Node)],e.prototype,"glowBoss",void 0),i([h(sp.Skeleton)],e.prototype,"Spine",void 0),e=i([l],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../API":"API","./EnemyMgr":"EnemyMgr","./GameDefine":"GameDefine","./GameMgr":"GameMgr","./Profile":"Profile"}],EnviromentManager:[function(t,e,n){"use strict";cc._RF.push(e,"ec5a0++gIhFPIf0JeIq7eEr","EnviromentManager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./GameDefine"),s=t("./GameMgr"),c=t("./Enviroment"),a=t("../utils/SingletonNode"),u=cc._decorator,p=u.ccclass,l=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.envPrefabs=[],e.MixPrefabs=[],e.MixDecorPrefabs=[],e.changeEnvSpeed=1,e.MiddleSpeed=1,e.isChangingEnviroment=!1,e.isMoveDecor=!1,e.currentEnvIndex=0,e.nextEnvPrefab=null,e.currentEnv=null,e.currentMix=null,e.currentMixDecor=null,e.totalDistance=0,e.canvasWidth=0,e}return o(e,t),e.prototype.start=function(){this.currentEnvIndex=-1,this.changeEnvSpeed=r.default.SPEED_PLAYER_NORMAL/this.changeEnvSpeed,this.canvasWidth=1920,this.spawnNextEviroment(),this.spawnMixEnv(),this.InitPos(),setTimeout(function(){},5e3)},e.prototype.changeEnviroment=function(){this.totalDistance=0,this.isChangingEnviroment=!0,this.isMoveDecor=!0,this.spawnMixDecor()},e.prototype.update=function(t){if(!s.default.Instance.IsPause()){for(var e=0,n=this.node.children;e<n.length;e++){var o=n[e];this.node.children.indexOf(o)<2||o&&(o.x-=this.changeEnvSpeed*t*1*r.default.DIR_SPEED,o.x<-2*this.canvasWidth&&(this.isMoveDecor=!1,o.destroy()))}if(this.isChangingEnviroment){var i=this.changeEnvSpeed*t*1*r.default.DIR_SPEED;this.totalDistance+=i;for(var c=0,a=this.node.children;c<a.length;c++){var u=a[c];this.node.children.indexOf(u)>=2||(u.x-=i,u.x<-(this.canvasWidth-10)&&(u.x+=2*(this.canvasWidth-10),0==this.node.children.indexOf(u)&&(this.spawnNextEviroment(),this.SetMove(this.currentEnv))))}this.totalDistance>=2*this.canvasWidth&&(this.isChangingEnviroment=!1,this.spawnMixEnv())}}},e.prototype.spawnNextEviroment=function(){this.currentEnvIndex=this.currentEnvIndex>=this.envPrefabs.length-1?0:this.currentEnvIndex+1;var t=cc.instantiate(this.envPrefabs[this.currentEnvIndex]);cc.find("env",this.node).addChild(t),this.currentEnv&&this.currentEnv.destroy(),t.setPosition(new cc.Vec2),this.currentEnv=t},e.prototype.spawnMixEnv=function(){var t=cc.instantiate(this.MixPrefabs[this.currentEnvIndex]);cc.find("Mix",this.node).children[0].addChild(t),this.currentMix&&this.currentMix.destroy(),t.setPosition(new cc.Vec2),this.currentMix=t},e.prototype.spawnMixDecor=function(){var t=cc.instantiate(this.MixDecorPrefabs[this.currentEnvIndex]);this.node.addChild(t),this.currentMixDecor&&this.currentMixDecor.destroy(),t.setPosition(new cc.Vec2(this.canvasWidth-20,0)),this.currentMixDecor=t},e.prototype.InitPos=function(){for(var t=0;t<this.node.children.length;t++){this.node.children[t].setPosition(new cc.Vec2(t*this.node.children[t].width,0)),this.SetMove(this.currentEnv)}},e.prototype.SetMove=function(t){t.getComponent(c.default).SetMove()},i([l([cc.Prefab])],e.prototype,"envPrefabs",void 0),i([l([cc.Prefab])],e.prototype,"MixPrefabs",void 0),i([l([cc.Prefab])],e.prototype,"MixDecorPrefabs",void 0),i([l(Number)],e.prototype,"changeEnvSpeed",void 0),i([l(Number)],e.prototype,"MiddleSpeed",void 0),e=i([p],e)}(a.default());n.default=h,cc._RF.pop()},{"../utils/SingletonNode":"SingletonNode","./Enviroment":"Enviroment","./GameDefine":"GameDefine","./GameMgr":"GameMgr"}],Enviroment:[function(t,e,n){"use strict";cc._RF.push(e,"862a5iSOoxCeJ2l1+x7ZADV","Enviroment");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./BGLoop"),s=cc._decorator,c=s.ccclass,a=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canMove=!1,e}return o(e,t),e.prototype.SetMove=function(){this.canMove=!0;for(var t=0,e=this.node.children;t<e.length;t++){var n=e[t].getComponent(r.default);n&&(n.canMove=!0)}},e=i([c],e)}(cc.Component));n.default=a,cc._RF.pop()},{"./BGLoop":"BGLoop"}],Events:[function(t,e,n){"use strict";cc._RF.push(e,"ea18dqOuq1Cx7O+U51FB9JD","Events");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var r=arguments[e],s=0,c=r.length;s<c;s++,i++)o[i]=r[s];return o};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../utils/SingletonNode"),c=cc._decorator,a=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.registerEvent=function(t,e){this.Instance.node.on(t,e)},e.emit=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];(e=this.Instance.node).emit.apply(e,r([t],n))},e.EventLanguageChanged="EventLanguageChanged",e=i([a],e)}(s.default()));n.default=u,cc._RF.pop()},{"../utils/SingletonNode":"SingletonNode"}],GameDefine:[function(t,e,n){"use strict";cc._RF.push(e,"66d36XhLrxH8IPu3QV/3hpp","GameDefine"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=new(function(){return function(){this.isCheating=!1,this.WAVE_DISTANCE_2_WAVE=100,this.SHOW_GAME_DEBUG=!0,this.GAME_WIDTH=576,this.GAME_HEIGHT=1024,this.VOLUME_VOICE_INPUT_AMPLIFIER=5,this.SPEED_GAME_BASE=60,this.SPEED_GRAVITY=-40,this.SPEED_PLAYER_NORMAL=3.5,this.SPEED_PLAYER_JUMP=11.5,this.TIME_API_TIMEOUT=1e4,this.TIME_GAME_PLAY=60,this.RATIO_HIGH_DEVICE_MIN=2,this.PLAYER_MAX_LV=15,this.PLAYER_BASE_HP=10,this.PLAYER_BASE_ATK=10,this.PLAYER_ADD_HP_LV_UP=0,this.PLAYER_ADD_ATK_LV_UP=10,this.FREEZE=5,this.SLOW=5,this.RAGE=5,this.INVISIBLE=5,this.LV_UP_PARAM=[{requireExp:0,hp:10,atk:10,reqSession:0},{requireExp:1e3,hp:10,atk:11,reqSession:18},{requireExp:2e3,hp:10,atk:12,reqSession:36},{requireExp:4e3,hp:10,atk:13,reqSession:73},{requireExp:7e3,hp:10,atk:14,reqSession:127},{requireExp:12e3,hp:10,atk:15,reqSession:218},{requireExp:2e4,hp:10,atk:16,reqSession:364},{requireExp:33e3,hp:10,atk:17,reqSession:600},{requireExp:54e3,hp:10,atk:18,reqSession:982},{requireExp:88e3,hp:10,atk:19,reqSession:1600},{requireExp:143e3,hp:10,atk:20,reqSession:2600},{requireExp:232e3,hp:10,atk:21,reqSession:4218},{requireExp:376e3,hp:10,atk:22,reqSession:6836},{requireExp:609e3,hp:10,atk:23,reqSession:11073},{requireExp:986e3,hp:10,atk:24,reqSession:17927},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018},{requireExp:1596e3,hp:10,atk:25,reqSession:29018}],this.WATER_BASE_LENGTH=1,this.WATER_ADDED_LENGTH=1,this.WATER_MAX_LENGTH=15,this.PLAYER_FLY_UP_SPEED=50,this.PLAYER_DROP_DOWN_SPEED=70,this.PLAYER_MAX_JUMP_HEIGHT=80,this.HP_BOOST=10,this.ATK_BOOST=10,this.EXP_NORMAL_ENEMY=1,this.EXP_BOSS_ENEMY=2,this.EXP_LANTERN=5,this.WAVE_BASE_ENEMIES=8,this.WAVE_ADDED_ENEMIES=1,this.WAVE_MAX_ENEMIES=18,this.WAVE_BASE_SPAWN_SPEED=2,this.WAVE_REDUCE_SPAWN_SPEED=.1,this.WAVE_MIN_SPAWN_SPEED=1,this.ENEMY_DEFINE_SPIDER={baseHP:50,addedHP:60,baseSpeed:5,addedSpeed:0,maxSpeed:0,score:1,exp:1},this.ENEMY_DEFINE_SNAKE={baseHP:40,addedHP:60,baseSpeed:2,addedSpeed:.2,maxSpeed:5,score:1,exp:1},this.ENEMY_DEFINE_CROW={baseHP:50,addedHP:60,baseSpeed:15,addedSpeed:1,maxSpeed:25,score:1,exp:1},this.ENEMY_DEFINE_OWL={baseHP:20,addedHP:0,baseSpeed:20,addedSpeed:0,maxSpeed:25,score:0,exp:5},this.ENEMY_DEFINE_BOSS={hPMultiplier:150,sizeMultiplier:2,score:2,addedHP:50},this.ENEMY_SPIDER_DROP_TIME=1,this.ENEMY_CROW_DROP_TIME=3,this.OFFSET_TIME_AFTER_KILL_BOSS=1,this.GRAVITY_DOWN=1.5,this.GRAVITY_UP=1,this.POWER_UP_SPEED=3,this.SKILL_TIME_COUNDOWN=[5,5,5,5],this.DIR_SPEED=1,this.SHOW_GAME_DEBUG&&console.warn("Playing in debug mode."),this.SPEED_GRAVITY*=this.SPEED_GAME_BASE,this.SPEED_PLAYER_NORMAL*=this.SPEED_GAME_BASE,this.SPEED_PLAYER_JUMP*=this.SPEED_GAME_BASE,this.POWER_UP_SPEED*=this.SPEED_GAME_BASE,this.PLAYER_ADD_ATK_LV_UP/=100,this.isCheating&&(this.PLAYER_BASE_HP=1,this.GRAVITY_DOWN=0)}}()),cc._RF.pop()},{}],GameMgr:[function(t,e,n){"use strict";cc._RF.push(e,"40dd4RMmi1N/YOCvFrL5ZaW","GameMgr");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/SingletonNode"),s=t("../utils/Timer"),c=t("./Enemy"),a=t("./LevelMgr"),u=t("./Player"),p=t("./Ground"),l=t("../ui/UIGame"),h=t("../popup/PopupManager"),d=t("./Effect"),f=t("../utils/Helper"),y=t("./Profile"),v=t("../API"),_=t("./GameDefine"),E=cc._decorator,m=E.ccclass,S=E.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Canvas=null,e.Camera=null,e.Player=null,e.LevelMgr=null,e.Ground=null,e.bgm=null,e.enemySwipeAudio=null,e.enemtDieAudio=null,e.playerBeAttacked=null,e.bossAppear=null,e.fxBlood=null,e.xpEffect=null,e.giftEffect=null,e.fxContainer=null,e.MuteSprite=null,e.Mute=null,e.UnMute=null,e.debugText=null,e.trail=null,e.trail2=null,e.points=[],e.isBlockTarget=!1,e.score=0,e.touchCount=0,e.scoreTimer=null,e.isPause=!1,e.volume=1,e.isGameStarted=!1,e.isShownRevive=!1,e.soundBGId=0,e.STATE={TUTORIAL:0,INGAME:1,GAMEOVER:2},e.state=0,e}return o(e,t),Object.defineProperty(e.prototype,"CanvasHeight",{get:function(){return this.screenSize.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CanvasWidth",{get:function(){return this.screenSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ScreenRatio",{get:function(){return Math.max(this.Canvas.width,this.Canvas.height)/Math.min(this.Canvas.width,this.Canvas.height)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IsHighRatioDevice",{get:function(){return this.ScreenRatio>=2},enumerable:!1,configurable:!0}),e.prototype.playerRoarSound=function(){cc.audioEngine.play(this.bossAppear,!1,y.default.Instance.volume)},e.prototype.spawnBloodFx=function(t){var e=cc.instantiate(this.fxBlood);this.fxContainer.addChild(e),e.setPosition(t),setTimeout(function(){e.destroy()},500)},e.prototype.spawnXpEffect=function(t,e){void 0===e&&(e=1);for(var n=0;n<e;n++){var o=t;1!=e&&(o.y+=f.default.RandInt(0,20));var i=cc.instantiate(this.xpEffect);this.fxContainer.addChild(i),i.setPosition(o),i.getComponent(d.default).action(this.xpUI,this.CanvasWidth,this.Canvas.height)}},e.prototype.saveDataEndGame=function(){},e.prototype.spawnGiftEffect=function(t,e){void 0===e&&(e="");var n=cc.instantiate(this.giftEffect);this.fxContainer.addChild(n),n.setPosition(t),n.getComponent(d.default).actionGift(this.GiftUI,this.CanvasWidth,this.Canvas.height,-1,e)},e.prototype.setMute=function(){y.default.Instance.setMute()},e.prototype.CreateGame=function(){var t=this;v.API.CreateGame(function(e){e&&t.LevelMgr.spawnWaveViaAPI(e,3*_.default.SPEED_PLAYER_NORMAL)})},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.screenSize=cc.view.getVisibleSize(),this.Canvas=cc.find("Canvas"),this.effectNode=new cc.Node,this.node.addChild(this.effectNode),this.ctx=this.effectNode.addComponent(cc.Graphics),this.ctx.lineJoin=cc.Graphics.LineJoin.BEVEL,cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-720),this.scoreTimer=new s.default,this.scoreTimer.SetDuration(1),console.log("Ver 18"),v.API.Endgame(function(t){})},e.prototype.addScore=function(t){void 0===t&&(t=0),this.score+=t,l.default.Instance.updateScore(this.score)},e.prototype.setState=function(t){switch(this.state=t,this.state){case this.STATE.TUTORIAL:setTimeout(function(){h.default.Instance.ShowHowToPlay()},2e3),this.onPauseGame();break;case this.STATE.INGAME:this.onResumeGame();break;case this.STATE.GAMEOVER:this.onPauseGame(),this.isShownRevive?this.showEndGame():(this.isShownRevive=!0,this.showRivive())}},e.prototype.start=function(){cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDrawBoundingBox=!0,this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchcancel",this.onTouchEnd,this),this.activeTrail(!1),this.addScore(),this.onPauseGame(),this.soundBGId=cc.audioEngine.play(this.bgm,!0,y.default.Instance.volume),this.xpUI=l.default.Instance.UI_XP,this.GiftUI=l.default.Instance.GiftContainer},e.prototype.UpdateMute=function(){},e.prototype.EnterGame=function(){this.onResumeGame(),this.setState(this.STATE.TUTORIAL),this.CreateGame()},e.prototype.StartGame=function(){this.isGameStarted||(this.isGameStarted=!0,this.Player.play(),this.setState(this.STATE.INGAME))},e.prototype.IsPause=function(){return this.isPause},e.prototype.onPauseGame=function(){this.isPause=!0,cc.audioEngine.pause(this.soundBGId)},e.prototype.onResumeGame=function(){this.isPause=!1,cc.audioEngine.resume(this.soundBGId)},e.prototype.setVolume=function(){cc.audioEngine.setVolume(this.soundBGId,y.default.Instance.volume)},e.prototype.onGameReplay=function(){h.default.Instance.resetAll(),this.score=0,this.addScore(),this.Player.node.active=!0,this.LevelMgr.replay(),this.Player.replay(),this.setState(this.STATE.INGAME),this.onResumeGame()},e.prototype.onRevival=function(){var t=this;v.API.Revive(function(e){h.default.Instance.resetAll(),t.Player.node.active=!0,t.LevelMgr.revival(e),t.Player.replay(),t.setState(t.STATE.INGAME),t.onResumeGame()})},e.prototype.showRivive=function(){h.default.Instance.ShowOops()},e.prototype.showEndGame=function(){h.default.Instance.ShowEndGame()},e.prototype.endGame=function(){this.setState(this.STATE.GAMEOVER)},e.prototype.update=function(t){if(!this.isPause)switch(this.state){case this.STATE.TUTORIAL:case this.STATE.INGAME:this.scoreTimer.Update(t),this.scoreTimer.IsDone()&&this.scoreTimer.Reset(),this.updateDraw(t);break;case this.STATE.GAMEOVER:}},e.prototype.onDeviceMotionEvent=function(t){var e=t.acc.x,n=t.acc.y;e=Math.round(100*e)/100,n=Math.round(100*n)/100},e.prototype.activeTrail=function(t){this.trail.active=t},e.prototype.onTouchEnd=function(t,e){this.touchCount--,this.touchCount<0&&(this.touchCount=0),this.resetEnemies(),this.points=[],this.points.length=0,this.activeTrail(!1)},e.prototype.onTouchStart=function(t,e){this.touchCount++,this.resetEnemies(),this.activeTrail(!1)},e.prototype.onTouchMove=function(t,e){if(1==this.touchCount){var n=t.getLocation(),o=t.getPreviousLocation();this.trail.position=this.node.convertToNodeSpaceAR(n);var i=n.sub(o).mag();if(i>1)for(var r=Math.ceil(i),s=0;s<r;s++){var a=n.x-o.x,u=n.y-o.y,p=s/i,l=cc.v2(o.x+a*p,o.y+u*p);this.points.length>400&&this.points.shift(),this.points.push(l)}if(!this.isPause){var h=this.LevelMgr.enemyArr;for(s=h.length-1;s>=0;s--){var d=h[s].getComponent(c.default),f=d.getComponent(cc.BoxCollider).world.aabb;f.contains(n)&&d.IsCanSwipe()?(this.isBlockTarget=!0,d.reduceHp()):f.contains(n)||d.reset()}}}},e.prototype.resetEnemies=function(){var t=this.LevelMgr.enemyArr;this.isBlockTarget=!1;for(var e=t.length-1;e>=0;e--)t[e].getComponent(c.default).reset()},e.prototype.updateDraw=function(t){if(this.points.length<30)for(var e=0;e<1&&this.points.length>0;e++)this.points.shift();else{for(e=0;e<9&&this.points.length>0;e++)this.points.shift();for(;this.points.length>400;)this.points.shift()}this.ctx.clear();var n=[this.randomNum(0,255),this.randomNum(0,200),this.randomNum(150,255)];this.ctx.strokeColor=new cc.Color(n[0],n[1],n[2]),this.drawKnife()},e.prototype.randomNum=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},e.prototype.drawKnife=function(){for(var t=40,e=1,n=1,o=this.points.length,i=o-2;i>=0;i--){++n<70?(t=e,e+=1):t-=2*t/o;var r=this.node.convertToNodeSpaceAR(this.points[i+1]),s=this.node.convertToNodeSpaceAR(this.points[i]);this.ctx.moveTo(r.x,r.y),this.ctx.lineTo(s.x,s.y),this.ctx.lineWidth=t,this.ctx.stroke()}},i([S(cc.Camera)],e.prototype,"Camera",void 0),i([S(u.default)],e.prototype,"Player",void 0),i([S(a.default)],e.prototype,"LevelMgr",void 0),i([S(p.default)],e.prototype,"Ground",void 0),i([S(cc.AudioClip)],e.prototype,"bgm",void 0),i([S(cc.AudioClip)],e.prototype,"enemySwipeAudio",void 0),i([S(cc.AudioClip)],e.prototype,"enemtDieAudio",void 0),i([S(cc.AudioClip)],e.prototype,"playerBeAttacked",void 0),i([S(cc.AudioClip)],e.prototype,"bossAppear",void 0),i([S(cc.Prefab)],e.prototype,"fxBlood",void 0),i([S(cc.Prefab)],e.prototype,"xpEffect",void 0),i([S(cc.Prefab)],e.prototype,"giftEffect",void 0),i([S(cc.Node)],e.prototype,"fxContainer",void 0),i([S(cc.Sprite)],e.prototype,"MuteSprite",void 0),i([S(cc.SpriteFrame)],e.prototype,"Mute",void 0),i([S(cc.SpriteFrame)],e.prototype,"UnMute",void 0),i([S(cc.Label)],e.prototype,"debugText",void 0),i([S(cc.Node)],e.prototype,"trail",void 0),i([S(cc.Node)],e.prototype,"trail2",void 0),e=i([m],e)}(r.default());n.default=g,cc._RF.pop()},{"../API":"API","../popup/PopupManager":"PopupManager","../ui/UIGame":"UIGame","../utils/Helper":"Helper","../utils/SingletonNode":"SingletonNode","../utils/Timer":"Timer","./Effect":"Effect","./Enemy":"Enemy","./GameDefine":"GameDefine","./Ground":"Ground","./LevelMgr":"LevelMgr","./Player":"Player","./Profile":"Profile"}],GameObject:[function(t,e,n){"use strict";cc._RF.push(e,"ac648lWW65FVL6lqaVqOgIb","GameObject");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.load=function(){},e.prototype.kill=function(){this.node.active=!1},e=i([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],Global:[function(t,e,n){"use strict";cc._RF.push(e,"d20a0HD4J5Lx6vX5OXcGy4+","Global");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),window.language="en";var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e=i([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],Ground:[function(t,e,n){"use strict";cc._RF.push(e,"79b08W0VJ9NR4jj8euOTeio","Ground");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./GameMgr"),s=t("./GameDefine"),c=t("../popup/PopupManager"),a=t("./Decoration"),u=t("./EnviromentManager"),p=cc._decorator,l=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.groundPrefabs=null,e.waterPrefabs=null,e.groundEndPrefab=null,e.groundBeignPrefab=null,e.groundFullFrame=[],e.groundEndFrame=[],e.groundBeginFrame=[],e.platforms=[],e.platformWidth=0,e.currentWidth=0,e.speed=0,e.isSpeedDown=!1,e.waterPlatform=[],e.groundBegin=[],e.groundEnd=[],e.canSpawnEnemy=!1,e.currentMode=0,e}return o(e,t),e.prototype.start=function(){this.init()},e.prototype.spawnGround=function(t,e){for(void 0===e&&(e=0),this.platformWidth=this.groundPrefabs.data.width;this.getPositionToSpawnEnemy()<t;){var n=cc.instantiate(this.groundPrefabs);n.getComponent(cc.Sprite).spriteFrame=this.groundFullFrame[this.currentMode],this.node.children[1].addChild(n);var o=this.platforms.length>0?this.platforms[this.platforms.length-1].x+this.platforms[this.platforms.length-1].width:0;n.setPosition(o,0),this.currentWidth+=this.platformWidth,this.platforms.push(n),a.default.Instance.spawnNewDecor(o)}},e.prototype.getPositionToSpawnEnemy=function(){var t=0;return this.platforms.length>0&&(t=this.platforms[this.platforms.length-1].x+this.platforms[this.platforms.length-1].width),t},e.prototype.stopSpawnEnemy=function(){this.canSpawnEnemy=!1},e.prototype.isCanSpawnEnemy=function(){return this.canSpawnEnemy},e.prototype.getWaterToFly=function(){return 0==this.groundEnd.length?null:this.groundEnd[0].x},e.prototype.getWaterToDrop=function(){return 1!=this.groundBegin.length?null:this.groundBegin[0].x+this.groundBegin[0].width},e.prototype.spawnWater=function(){var t=s.default.WATER_BASE_LENGTH+s.default.WATER_ADDED_LENGTH*(r.default.Instance.LevelMgr.waveCount-1);t=t>s.default.WATER_MAX_LENGTH?s.default.WATER_MAX_LENGTH:t;var e=cc.instantiate(this.groundEndPrefab);e.getComponent(cc.Sprite).spriteFrame=this.groundEndFrame[this.currentMode],this.node.children[1].addChild(e),e.setPosition(this.platforms[this.platforms.length-1].x+this.platforms[this.platforms.length-1].width,0),this.currentWidth+=e.width,this.platforms.push(e);var n=!0;this.groundEnd.push(e);for(var o=0;o<t;o++){var i=cc.instantiate(this.waterPrefabs);this.node.children[0].addChild(i);var p=this.platforms[this.platforms.length-1].x+this.platforms[this.platforms.length-1].width;this.currentWidth+=i.width,this.platformWidth,n&&(n=!1,p-=30,this.currentWidth-=30,30),i.setPosition(p,0),this.platforms.push(i),this.waterPlatform.push(i)}var l=cc.instantiate(this.groundBeignPrefab);l.getComponent(cc.Sprite).spriteFrame=this.groundBeginFrame[this.currentMode],this.node.children[1].addChild(l),l.setPosition(this.platforms[this.platforms.length-1].x+this.platforms[this.platforms.length-1].width-30,0),this.currentWidth+=l.width,this.platforms.push(l),this.groundBegin.push(l),a.default.Instance.changeBackground(l.x),this.canSpawnEnemy=!0,r.default.Instance.LevelMgr.spawnPowerUp().setPosition(new cc.Vec3(this.getMiddleWater(),100,0));var h=(this.groundEnd[0].x-r.default.Instance.Player.node.x-r.default.Instance.CanvasWidth/5)/s.default.SPEED_PLAYER_NORMAL;c.default.Instance.ShowWaterComming(h),setTimeout(function(){u.default.Instance.changeEnviroment()},1e3),this.currentMode=this.currentMode>=this.groundFullFrame.length-1?0:this.currentMode+1},e.prototype.getMiddleWater=function(){return(this.groundEnd[this.groundEnd.length-1].x+this.groundEnd[this.groundEnd.length-1].width+this.groundBegin[this.groundBegin.length-1].x)/2},e.prototype.update=function(t){r.default.Instance.IsPause()||(this.updatePlatform(t),this.spawnNewGround(t))},e.prototype.spawnNewGround=function(t){if(0!=this.platforms.length){var e=this.platforms[this.platforms.length-1];if(e.x+e.width<r.default.Instance.CanvasWidth+20){var n=cc.instantiate(this.groundPrefabs);n.getComponent(cc.Sprite).spriteFrame=this.groundFullFrame[this.currentMode],this.node.children[1].addChild(n);var o=this.platforms[this.platforms.length-1].x+this.platforms[this.platforms.length-1].width;n.setPosition(o,0),this.currentWidth+=this.platformWidth,this.platforms.push(n),a.default.Instance.spawnNewDecor(o)}}},e.prototype.updatePlatform=function(t){for(var e=0,n=this.platforms;e<n.length;e++){var o=n[e];o.setPosition(o.position.add(new cc.Vec3(-s.default.SPEED_PLAYER_NORMAL*t*s.default.DIR_SPEED,0,0)))}this.platforms.length>0&&this.platforms[0].x<-this.platforms[0].width-30&&(-1!=this.waterPlatform.indexOf(this.platforms[0])&&this.waterPlatform.shift(),-1!=this.groundBegin.indexOf(this.platforms[0])&&this.groundBegin.shift(),-1!=this.groundEnd.indexOf(this.platforms[0])&&this.groundEnd.shift(),this.platforms[0].active=!1,this.platforms[0].destroy(),this.platforms.shift(),this.currentWidth-=this.platformWidth)},e.prototype.destroyAll=function(){for(var t=0,e=this.platforms;t<e.length;t++){e[t].destroy()}this.platforms=[],this.groundBegin=[],this.groundEnd=[],this.waterPlatform=[]},e.prototype.init=function(){this.speed=s.default.SPEED_PLAYER_NORMAL},e.prototype.slowDown=function(){},e.prototype.speedUp=function(){},i([h(cc.Prefab)],e.prototype,"groundPrefabs",void 0),i([h(cc.Prefab)],e.prototype,"waterPrefabs",void 0),i([h(cc.Prefab)],e.prototype,"groundEndPrefab",void 0),i([h(cc.Prefab)],e.prototype,"groundBeignPrefab",void 0),i([h([cc.SpriteFrame])],e.prototype,"groundFullFrame",void 0),i([h([cc.SpriteFrame])],e.prototype,"groundEndFrame",void 0),i([h([cc.SpriteFrame])],e.prototype,"groundBeginFrame",void 0),e=i([l],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../popup/PopupManager":"PopupManager","./Decoration":"Decoration","./EnviromentManager":"EnviromentManager","./GameDefine":"GameDefine","./GameMgr":"GameMgr"}],Helper:[function(t,e,n){"use strict";cc._RF.push(e,"90a75udUmlJUqYerDKv5BZf","Helper"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=new(function(){function t(){}return t.prototype.Rand=function(t,e){return Math.random()*(e-t)+t},t.prototype.RandInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},t.prototype.RandArgument=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return arguments[this.RandInt(0,arguments.length-1)]},t.prototype.RandArray=function(t){return t[this.RandInt(0,t.length-1)]},t.prototype.RandTypeEnum=function(t){var e=Object.keys(t);return this.RandInt(0,e.length/2-1)},t.prototype.GetKey=function(t,e){return Object.keys(t)[e]},t.prototype.GetKeyEnum=function(t,e){var n=Object.keys(t);return n[e+n.length/2]},t.prototype.GetIndexEnum=function(t,e){for(var n=Object.keys(t),o=n.length/2;o<n.length;o++)if(n[o]==e)return o-n.length/2;return-1},t.prototype.Normalized=function(t,e,n,o){var i=t-n,r=e-o,s=Math.sqrt(i*i+r*r);return new cc.Vec2(i/s,r/s)},t.prototype.MoveToTarget=function(t,e,n){return n=Math.abs(n),t<e?Math.min(e,t+n):Math.max(e,t-n)},t.prototype.Collision2Rect=function(t,e){return!(t.x+t.width<e.x||t.y+t.height<e.y||e.x+e.width<t.x||e.y+e.height<t.y)},t.prototype.CollisionPointRect=function(t,e,n){return!(t<n.x||e<n.y||t>n.x+n.width||e>n.y+n.height)},t.prototype.Distance=function(t,e,n,o){return Math.sqrt((t-n)*(t-n)+(e-o)*(e-o))},t.prototype.Constrain=function(t,e,n){return t=Math.max(e,t),t=Math.min(n,t)},t.prototype.ToRadian=function(t){return t/180*Math.PI},t.prototype.ToAngle=function(t){return t/Math.PI*180},t.prototype.TimeoutPromise=function(t,e){var n=new Promise(function(e,n){setTimeout(function(){n("Timed out.")},t)});return Promise.race([e,n])},t.prototype.HttpRequest=function(t,e,n,o,i,r){void 0===i&&(i=null),void 0===r&&(r={});var s=window.logEvent||console.log,c=Date.now(),a=e.split("/").pop().split("?").shift();return new Promise(function(u,p){var l=new XMLHttpRequest;l.open(t,e,!0),"POST"==t&&l.setRequestHeader("Content-Type","application/json");for(var h=0,d=i;h<d.length;h++){var f=d[h];l.setRequestHeader(f.key,f.value)}o&&(l.responseType=o),l.timeout=1e4,l.onreadystatechange=function(){4==l.readyState&&(200==l.status?u(l.response):p(l.response),s(a,{method:t,url:e,body:n,requestParams:r,reponseStatus:l.status,response:l.response,duration:Date.now()-c}))},l.onerror=function(o){s("apiRequestError",{apiName:a,method:t,url:e,body:n,requestParams:r,duration:Date.now()-c}),p("error")},l.ontimeout=function(t){p("timed out")},l.send(n)})},t.prototype.DrawLine=function(t,e,n,o,i,r,s){void 0===r&&(r=cc.Color.RED),void 0===s&&(s=2),t.lineWidth=s,t.strokeColor=r,t.moveTo(e,n),t.lineTo(o,i),t.stroke()},t.prototype.DrawSquare=function(t,e,n,o,i,r){void 0===i&&(i=cc.Color.RED),void 0===r&&(r=2),this.DrawRect(t,e,n,o,o,i,r)},t.prototype.DrawRect=function(t,e,n,o,i,r,s){void 0===r&&(r=cc.Color.RED),void 0===s&&(s=2),t.lineWidth=s,t.strokeColor=r,"number"==typeof e?t.rect(e,n,o,i):t.rect(e.x,e.y,e.width,e.height),t.stroke()},t.prototype.DrawArc=function(t,e,n,o,i,r,s,c,a,u,p){void 0===i&&(i=0),void 0===r&&(r=2*Math.PI),void 0===s&&(s=0),void 0===c&&(c=!0),void 0===a&&(a=cc.Color.RED),void 0===u&&(u=2),void 0===p&&(p=!1);var l=2*Math.PI,h=1.5*Math.PI;r=l-(r+=h+s),i=(i=l-(i+=h+s))>l?i%l:i,r=r>l?r%l:r,t.lineWidth=u,t.strokeColor=a,t.arc(e,n,o,i,r,c),p&&(t.lineTo(e,n),t.close()),t.stroke()},t.prototype.DrawCircle=function(t,e,n,o,i,r){void 0===i&&(i=cc.Color.RED),void 0===r&&(r=2),this.DrawEllipse(t,e,n,o,o,i,r)},t.prototype.DrawEllipse=function(t,e,n,o,i,r,s){void 0===r&&(r=cc.Color.RED),void 0===s&&(s=2),t.lineWidth=s,t.strokeColor=r,t.ellipse(e,n,o,i),t.stroke()},t.prototype.FillSquare=function(t,e,n,o,i){void 0===i&&(i=cc.Color.RED),this.FillRect(t,e,n,o,o,i)},t.prototype.FillRect=function(t,e,n,o,i,r){void 0===r&&(r=cc.Color.RED),t.fillColor=r,this.DrawRect(t,e,n,o,i,r,0),t.fill()},t.prototype.FillArc=function(t,e,n,o,i,r,s,c,a){void 0===i&&(i=0),void 0===r&&(r=2*Math.PI),void 0===s&&(s=0),void 0===c&&(c=!0),void 0===a&&(a=cc.Color.RED),t.fillColor=a,this.DrawArc(t,e,n,o,i,r,s,c,void 0,0,!0),t.fill()},t.prototype.FillCircle=function(t,e,n,o,i){void 0===i&&(i=cc.Color.RED),this.FillEllipse(t,e,n,o,o,i)},t.prototype.FillEllipse=function(t,e,n,o,i,r){void 0===r&&(r=cc.Color.RED),t.fillColor=r,this.DrawEllipse(t,e,n,o,i,r,0),t.fill()},t}()),cc._RF.pop()},{}],HistoryEmoney:[function(t,e,n){"use strict";cc._RF.push(e,"4d80fGXQOZM76asWyv1XueI","HistoryEmoney");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.CopyBtn=null,e.content=null,e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.CopyBtn.on(cc.Node.EventType.TOUCH_END,function(){return t.copyToClipboard()})},e.prototype.start=function(){},e.prototype.copyToClipboard=function(){},e.prototype.init=function(t){this.content=this.node,cc.find("index",this.content).getComponent(cc.Label).string=t.index},i([c(cc.Node)],e.prototype,"CopyBtn",void 0),e=i([s],e)}(cc.Component);n.default=a,cc._RF.pop()},{}],HistoryLuckyCode:[function(t,e,n){"use strict";cc._RF.push(e,"baea5Vc3qdFWL8MpYYB7xsP","HistoryLuckyCode");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e}return o(e,t),e.prototype.init=function(t){this.content=this.node,cc.find("index",this.content).getComponent(cc.Label).string=t.index,cc.find("lucky code",this.content).getComponent(cc.Label).string=t.luckyCode},e=i([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],HistoryTurn:[function(t,e,n){"use strict";cc._RF.push(e,"651efW/5gpET5YROy5ArzRL","HistoryTurn");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e}return o(e,t),e.prototype.init=function(t){this.content=this.node,cc.find("index",this.content).getComponent(cc.Label).string=t.index,cc.find("prizeTxt",this.content).getComponent(cc.Label).string=t.prize,cc.find("Image",this.content).getComponent(cc.Sprite).spriteFrame=t.prizeImg,cc.find("Image",this.content).children[0].getComponent(cc.Label).string=t.prizeDesc},e=i([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],Item:[function(t,e,n){"use strict";cc._RF.push(e,"961f25TL7VG+qduOlBu3ykl","Item");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.ItemType=void 0;var r,s=t("./GameDefine"),c=t("./GameMgr"),a=cc._decorator,u=a.ccclass,p=a.property;(function(t){t[t.HP=0]="HP",t[t.POWER_UP=1]="POWER_UP"})(r=n.ItemType||(n.ItemType={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.POWER_UP,e.isPowerUp=!1,e.isMoveUp=!1,e}return o(e,t),e.prototype.start=function(){},e.prototype.useItem=function(){var t=this;switch(this.type){case r.HP:c.default.Instance.Player.increaHP(10),this.getComponent(cc.BoxCollider).enabled=!1,cc.tween(this.node).by(.5,{scale:1.2},{easing:"bounceOut"}).delay(.2).call(function(){t.node.active=!1,t.node.destroy()}).start();break;case r.POWER_UP:c.default.Instance.Player.increaATK(10),this.getComponent(cc.BoxCollider).enabled=!1,cc.tween(this.node).by(.5,{scale:1.2},{easing:"bounceOut"}).delay(.2).call(function(){t.node.active=!1,t.node.destroy()}).start()}},e.prototype.hardDestroy=function(){this.node.active=!1,this.node.destroy()},e.prototype.setPowerUp=function(){this.isPowerUp=!0},e.prototype.update=function(t){if(!c.default.Instance.IsPause()){if(this.isPowerUp&&this.isMoveUp){this.node.setPosition(this.node.position.add(new cc.Vec3(0,s.default.POWER_UP_SPEED*t,0)));var e=c.default.Instance.CanvasHeight*(s.default.PLAYER_MAX_JUMP_HEIGHT-30)/100;this.node.y>e&&(this.node.y=e)}this.isPowerUp&&!this.isMoveUp&&this.node.x<c.default.Instance.CanvasWidth-200&&(this.isMoveUp=!0),this.node.setPosition(this.node.position.add(new cc.Vec3(-s.default.SPEED_PLAYER_NORMAL*t*s.default.DIR_SPEED,0,0))),this.node.x<-50-this.node.width&&(this.node.active=!1,this.node.destroy())}},i([p({type:cc.Enum(r)})],e.prototype,"type",void 0),i([p(cc.Boolean)],e.prototype,"isPowerUp",void 0),e=i([u],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./GameDefine":"GameDefine","./GameMgr":"GameMgr"}],LBPreniumPrize:[function(t,e,n){"use strict";cc._RF.push(e,"397caITCC1HI60EjgA8bOwQ","LBPreniumPrize");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e}return o(e,t),e.prototype.init=function(t){this.content=this.node,cc.find("index",this.content).getComponent(cc.Label).string=t.index,cc.find("userid",this.content).getComponent(cc.Label).string=t.userId,cc.find("prizeTxt",this.content).getComponent(cc.Label).string=t.prize,cc.find("prizeImg",this.content).getComponent(cc.Sprite).spriteFrame=t.prizeImg},e=i([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],LBStar:[function(t,e,n){"use strict";cc._RF.push(e,"8047aiQTGFOzp/PgFGCGltt","LBStar");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e}return o(e,t),e.prototype.init=function(t){this.content=this.node.children[0],t.index>2?(cc.find("bg",this.content).active=!1,cc.find("medal",this.content).active=!1):(cc.find("bg",this.content).getComponent(cc.Sprite).spriteFrame=t.bgSpriteFrame,cc.find("medal",this.content).getComponent(cc.Sprite).spriteFrame=t.medalSpriteFrame),cc.find("index",this.content).getComponent(cc.Label).string=t.index,cc.find("userid",this.content).getComponent(cc.Label).string=t.userId,cc.find("score",this.content).getComponent(cc.Label).string=t.score},e=i([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],LBWinnerPrize:[function(t,e,n){"use strict";cc._RF.push(e,"7679biyslBNmbEdEjdCxOam","LBWinnerPrize");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e}return o(e,t),e.prototype.init=function(t){this.content=this.node,cc.find("index",this.content).getComponent(cc.Label).string=t.index,cc.find("userid",this.content).getComponent(cc.Label).string=t.userId,cc.find("prizeTxt",this.content).getComponent(cc.Label).string=t.prize},e=i([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],LevelMgr:[function(t,e,n){"use strict";cc._RF.push(e,"42a23NwLVBIILOlnsx4m4AY","LevelMgr");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Enemy"),s=t("./GameMgr"),c=t("../ui/UIGame"),a=t("./Item"),u=t("./Decoration"),p=t("../API"),l=cc._decorator,h=l.ccclass,d=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.TutorialWave=[],e.EasyWave=[],e.HardWave=[],e.DifficultWave=[],e.EnemyPrefabs=[],e.ItemPrefabs=[],e.EnemyMgr=null,e.ItemMgr=null,e.isTutorial=!1,e.isSpawnFirst=!1,e.currentWaveArr=[],e.currentWavePrefab=null,e.currentWave=null,e.LastObject=null,e.currentWaveIndex=0,e.waveCount=0,e.waveShow=0,e.enemyArr=[],e.STATE={TUTORIAL:0,RUNNING_WAVE:1,FINISH_WAVE:2,RUNNING_WATER:3,FINISH_WATER:4},e}return o(e,t),e.prototype.setState=function(t){switch(this.mState=t,this.mState){case this.STATE.TUTORIAL:case this.STATE.RUNNING_WAVE:case this.STATE.FINISH_WAVE:break;case this.STATE.RUNNING_WATER:case this.STATE.FINISH_WATER:}},e.prototype.start=function(){this.currentWaveIndex=0,this.currentWaveArr=this.isTutorial?this.TutorialWave:this.EasyWave,this.setState(this.STATE.RUNNING_WAVE)},e.prototype.update=function(t){if(!s.default.Instance.IsPause())switch(this.mState){case this.STATE.TUTORIAL:case this.STATE.RUNNING_WAVE:case this.STATE.FINISH_WAVE:case this.STATE.RUNNING_WATER:case this.STATE.FINISH_WATER:}},e.prototype.CreateNextWave=function(t){var e=this;void 0===t&&(t=0),console.log("nextwave"),p.API.NextWave(function(n){n&&e.spawnWaveViaAPI(n,t)})},e.prototype.getLastEnemy=function(){if(0==this.enemyArr.length)return null;for(var t=this.enemyArr[0],e=0;e<this.enemyArr.length;e++)0!=e&&this.enemyArr[e].position.x>this.enemyArr[e-1].position.x&&(t=this.enemyArr[e]);return t},e.prototype.spawnPowerUp=function(){var t=cc.instantiate(this.ItemPrefabs[Math.random()<.5?0:1]);return this.ItemMgr.addChild(t),t},e.prototype.changeWave=function(){if(this.currentWaveArr==this.EasyWave)this.currentWaveIndex=0,this.currentWaveArr=this.HardWave;else if(this.currentWaveArr==this.HardWave)this.currentWaveIndex=0,this.currentWaveArr=this.DifficultWave;else if(this.currentWaveArr==this.DifficultWave)return},e.prototype.destroyAll=function(){for(var t=0,e=this.EnemyMgr.children;t<e.length;t++){(i=e[t])&&i.getComponent(r.default).hardDestroy()}for(var n=0,o=this.ItemMgr.children;n<o.length;n++){var i;(i=o[n])&&i.getComponent(a.default).hardDestroy()}this.enemyArr=[],s.default.Instance.Ground.destroyAll(),u.default.Instance.destroyAll()},e.prototype.replay=function(){this.currentWaveIndex=0,this.waveCount=1,this.destroyAll(),this.spawnWaveViaPrefab(0,!0),s.default.Instance.Ground.spawnGround(this.getLastEnemy().x)},e.prototype.revival=function(t){this.destroyAll(),this.spawnWaveViaAPI(t)},e.prototype.removeEnemy=function(t){var e=this.enemyArr.indexOf(t);e>-1&&this.enemyArr.splice(e,1)},e.prototype.spawnWaveViaPrefab=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1),e||(this.waveCount++,this.currentWaveIndex=this.currentWaveIndex>=this.currentWaveArr.length-1?0:this.currentWaveIndex+1),this.currentWavePrefab=this.currentWaveArr[this.currentWaveIndex];for(var n=0,o=this.currentWavePrefab.data.children;n<o.length;n++){var i=o[n];if(null!=i.getComponent(r.default)){var c=i.position,a=cc.instantiate(this.EnemyPrefabs[i.getComponent(r.default).type]);a.getComponent(r.default).isBoss=i.getComponent(r.default).isBoss,this.EnemyMgr.addChild(a);var u=0==t?s.default.Instance.CanvasWidth:s.default.Instance.CanvasWidth/2;a.setPosition(c.x+u+t,0),this.enemyArr.push(a)}}this.LastObject=this.getLastEnemy()},e.prototype.ShowWaveUI=function(){this.waveShow=this.waveCount,c.default.Instance.updateWave(this.waveShow)},e.prototype.spawnWaveViaAPI=function(t,e){void 0===e&&(e=0);var n=0;this.waveCount=t.result.wave.index,console.log(t.result.wave.monsters.length);for(var o=0,i=t.result.wave.monsters;o<i.length;o++){var a=i[o],u=this.EnemyPrefabs[0],p=a.type.indexOf("_boss")>-1,l=0;switch(a.type.replace("_boss","")){case"owl":l=3;break;case"raven":l=1;break;case"python":l=2;break;case"spider":l=0}u=this.EnemyPrefabs[l];var h=cc.instantiate(u);this.EnemyMgr.addChild(h);var d=0==e?s.default.Instance.CanvasWidth:e+s.default.Instance.CanvasWidth,f=0;p&&(f=500),h.setPosition(d+300*n+f,0),h.getComponent(r.default).init(a,p,a.id),this.enemyArr.push(h),n++}c.default.Instance.updateWave(this.waveCount),s.default.Instance.Ground.spawnGround(this.getLastEnemy().x)},i([d([cc.Prefab])],e.prototype,"TutorialWave",void 0),i([d([cc.Prefab])],e.prototype,"EasyWave",void 0),i([d([cc.Prefab])],e.prototype,"HardWave",void 0),i([d([cc.Prefab])],e.prototype,"DifficultWave",void 0),i([d([cc.Prefab])],e.prototype,"EnemyPrefabs",void 0),i([d([cc.Prefab])],e.prototype,"ItemPrefabs",void 0),i([d(cc.Node)],e.prototype,"EnemyMgr",void 0),i([d(cc.Node)],e.prototype,"ItemMgr",void 0),e=i([h],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../API":"API","../ui/UIGame":"UIGame","./Decoration":"Decoration","./Enemy":"Enemy","./GameMgr":"GameMgr","./Item":"Item"}],Loader:[function(t,e,n){"use strict";cc._RF.push(e,"7a9f7yMm5NOwZYfjzYMZZt1","Loader");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Prefabs=[],e}return o(e,t),e.prototype.onLoad=function(){for(var t=0;t<this.Prefabs.length;t++)this.node.addChild(cc.instantiate(this.Prefabs[t]))},i([c(cc.Prefab)],e.prototype,"Prefabs",void 0),e=i([s],e)}(cc.Component);n.default=a,cc._RF.pop()},{}],Localization:[function(t,e,n){"use strict";cc._RF.push(e,"bd45doTXaVJGazSbf1+Ekni","Localization");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.TextTransforms=n.LOCALIZATION_ENUM=n.LOCALIZATION_KEYS=void 0;var r=cc._decorator,s=r.ccclass,c=(r.property,t("../../strings")),a=t("./Events"),u={};n.LOCALIZATION_KEYS=Object.keys(c);for(var p=0;p<n.LOCALIZATION_KEYS.length;p++)u[n.LOCALIZATION_KEYS[p]]=p;n.LOCALIZATION_ENUM=cc.Enum(u),n.TextTransforms=cc.Enum({None:0,Upper:1,Lower:2});var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.GetLocalizedString=function(t){return c[t]?(window.language="my",window.language="mu",window.language="en",c[t][window.language.toUpperCase()]||""):""},e.ChangeLanguage=function(t){window.language=t,a.default.emit(a.default.EventLanguageChanged)},e=i([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../../strings":"strings","./Events":"Events"}],LocalizedFrame:[function(t,e,n){"use strict";cc._RF.push(e,"8ba3d+Bn6NI76jJhS1uJSSp","LocalizedFrame");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/Events"),s=cc._decorator,c=s.ccclass,a=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EN=null,e.MY=null,e.MU=null,e}return o(e,t),e.prototype.onLoad=function(){r.default.registerEvent(r.default.EventLanguageChanged,this.localize.bind(this)),this.mDefaultFrame=this.node.getComponent(cc.Sprite).spriteFrame},e.prototype.onEnable=function(){this.localize()},e.prototype.localize=function(){this.node.getComponent(cc.Sprite).spriteFrame=this[window.language.toUpperCase()]||this.mDefaultFrame},i([a(cc.SpriteFrame)],e.prototype,"EN",void 0),i([a(cc.SpriteFrame)],e.prototype,"MY",void 0),i([a(cc.SpriteFrame)],e.prototype,"MU",void 0),e=i([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../common/Events":"Events"}],LocalizedText:[function(t,e,n){"use strict";cc._RF.push(e,"d9adbSs7VdIeaPiYGmWgXvR","LocalizedText");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,a=r.executeInEditMode,u=t("../common/Events"),p=t("../common/Localization"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.KeyIndex=0,e.TextTransform=0,e.Key="",e.fontSizeEn=null,e.fontSizeMy=null,e.fontSizeMu=null,e}return o(e,t),e.prototype.onLoad=function(){try{u.default.registerEvent(u.default.EventLanguageChanged,this.localize.bind(this))}catch(t){}this.mDefaultString=this.node.getComponent(cc.Label).string},e.prototype.onEnable=function(){if(this.Key){if(this.Key!=p.LOCALIZATION_KEYS[this.KeyIndex]){var t=p.LOCALIZATION_KEYS.indexOf(this.Key);this.KeyIndex=-1!=t?t:0,this.Key=p.LOCALIZATION_KEYS[this.KeyIndex]||""}}else 0!=this.KeyIndex&&(this.Key=p.LOCALIZATION_KEYS[this.KeyIndex]||"");this.localize()},e.prototype.localize=function(){var t=p.default.GetLocalizedString(p.LOCALIZATION_KEYS[this.KeyIndex])||this.mDefaultString;switch(this.TextTransform){case p.TextTransforms.None:break;case p.TextTransforms.Upper:t=t.toUpperCase();break;case p.TextTransforms.Lower:t=t.toLowerCase()}var e=this.node.getComponent(cc.Label);e.string=t,"en"==window.language&&this.fontSizeEn?(e.fontSize=this.fontSizeEn.x,e.lineHeight=this.fontSizeEn.y):"my"==window.language&&this.fontSizeMy?(e.fontSize=this.fontSizeMy.x,e.lineHeight=this.fontSizeMy.y):"mu"==window.language&&this.fontSizeMu&&(e.fontSize=this.fontSizeMu.x,e.lineHeight=this.fontSizeMu.y)},i([c({type:p.LOCALIZATION_ENUM})],e.prototype,"KeyIndex",void 0),i([c({type:p.TextTransforms})],e.prototype,"TextTransform",void 0),i([c(cc.Vec2)],e.prototype,"fontSizeEn",void 0),i([c(cc.Vec2)],e.prototype,"fontSizeMy",void 0),i([c(cc.Vec2)],e.prototype,"fontSizeMu",void 0),e=i([s,a],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../common/Events":"Events","../common/Localization":"Localization"}],MiddleGround:[function(t,e,n){"use strict";cc._RF.push(e,"93bb3i+031GTb9K+nIgrS3b","MiddleGround");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./GameDefine"),s=t("./GameMgr"),c=t("../utils/SingletonNode"),a=cc._decorator,u=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=1,e.Desert_Decor=[],e.City_Decor=[],e.Mix_Decor=null,e.canvasWidth=0,e.destroyNodeArr=[],e.activeNodeArr=[],e.currentGroundIndex=0,e}return o(e,t),e.prototype.start=function(){this.speed=r.default.SPEED_PLAYER_NORMAL/this.speed,this.canvasWidth=s.default.Instance.CanvasWidth,this.currentMode=this.City_Decor,this.spawnNewDecor(),setTimeout(function(){},3e3)},e.prototype.update=function(t){if(!s.default.Instance.IsPause()){for(var e=this.speed*t*1,n=0,o=this.activeNodeArr;n<o.length;n++){(c=o[n]).x-=e,c.x<-c.width/2-this.canvasWidth/2&&(c.x+=this.activeNodeArr.length*c.width)}for(var i=0,r=this.destroyNodeArr;i<r.length;i++){var c;(c=r[i]).x-=e,c.x<-c.width/2-this.canvasWidth/2&&(this.destroyNodeArr.splice(this.destroyNodeArr.indexOf(c),1),c.destroy())}}},e.prototype.spawnNewDecor=function(t){void 0===t&&(t=0),this.currentMode=this.currentMode==this.Desert_Decor?this.City_Decor:this.Desert_Decor;for(var e=0,n=-1,o=0==t?-this.canvasWidth/2:t;e<this.canvasWidth+this.currentMode[0].data.width;){n++;var i=cc.instantiate(this.currentMode[this.currentGroundIndex]);this.node.addChild(i),this.activeNodeArr.push(i),i.setPosition(new cc.Vec2(o+(n+.5)*i.width,0)),e+=i.width,this.currentGroundIndex=this.currentGroundIndex>=this.currentMode.length-1?0:this.currentGroundIndex+1}},e.prototype.changeBackground=function(){console.log("move"),this.currentGroundIndex=0;for(var t=this.getLastPos(),e=this.activeNodeArr.length,n=0;n<e;n++)this.destroyNodeArr.push(this.activeNodeArr.shift());this.spawnNewDecor(this.spawnMixBg(t))},e.prototype.spawnMixBg=function(t){console.log("spawnnnn");var e=cc.instantiate(this.Mix_Decor);return this.node.addChild(e),this.destroyNodeArr.push(e),e.setPosition(new cc.Vec2(t+.5*e.width,0)),e.x+e.width/2},e.prototype.getLastPos=function(){if(0==this.activeNodeArr.length)return null;for(var t=this.activeNodeArr[0],e=0;e<this.activeNodeArr.length;e++)0!=e&&this.activeNodeArr[e].position.x>this.activeNodeArr[e-1].position.x&&(t=this.activeNodeArr[e]);return t.x+t.width/2},i([p(Number)],e.prototype,"speed",void 0),i([p([cc.Prefab])],e.prototype,"Desert_Decor",void 0),i([p([cc.Prefab])],e.prototype,"City_Decor",void 0),i([p(cc.Prefab)],e.prototype,"Mix_Decor",void 0),e=i([u],e)}(c.default());n.default=l,cc._RF.pop()},{"../utils/SingletonNode":"SingletonNode","./GameDefine":"GameDefine","./GameMgr":"GameMgr"}],ObjectMgr:[function(t,e,n){"use strict";cc._RF.push(e,"dbc77ws+sxPlY9zPANdJYTf","ObjectMgr");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.load=function(t,e){},e.prototype.init=function(){this.hide()},e.prototype.hide=function(){for(var t=0,e=this.node.children;t<e.length;t++){e[t].active=!1}},e.prototype.spawn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.getAvailable=function(){for(var t=0,e=this.node.children;t<e.length;t++){var n=e[t];if(!n.active)return n}return null},e=i([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],Outline:[function(t,e,n){"use strict";cc._RF.push(e,"636b4uwYLRBmosJ5T9wVXtW","Outline");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return o(e,t),e.prototype.start=function(){},i([c(cc.Label)],e.prototype,"label",void 0),i([c],e.prototype,"text",void 0),e=i([s],e)}(cc.Component);n.default=a,cc._RF.pop()},{}],PlayerSkill:[function(t,e,n){"use strict";cc._RF.push(e,"dbad1AR4ydNyrHl16mrdz0L","PlayerSkill");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Player"),s=t("./GameMgr"),c=t("./GameDefine"),a=t("../utils/SingletonNode"),u=t("./Enemy"),p=cc._decorator,l=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.player=null,e.skillEquipment=[],e.isUsingSkill=!1,e.timerUseSkill=0,e.SKILL_TYPE={FREEZE:0,SLOW:1,RAGE:2,INVISIBLE:3},e.currentSkill=0,e.currentATK=0,e}return o(e,t),e.prototype.useSkill=function(t,e){if(!this.isUsingSkill)switch(this.isUsingSkill=!0,this.currentSkill=parseInt(e),this.currentSkill){case this.SKILL_TYPE.FREEZE:this.timerUseSkill=c.default.FREEZE;for(var n=0,o=s.default.Instance.LevelMgr.enemyArr;n<o.length;n++){o[n].getComponent(u.default).setFreeze(!0)}break;case this.SKILL_TYPE.SLOW:for(var i=0,r=s.default.Instance.LevelMgr.enemyArr;i<r.length;i++){r[i].getComponent(u.default).setSlowDown(!0)}c.default.DIR_SPEED=.5,this.timerUseSkill=c.default.SLOW;break;case this.SKILL_TYPE.RAGE:this.timerUseSkill=c.default.RAGE,this.currentATK=this.player.currentATK,this.player.SetRage(!0),this.player.increaATK(this.currentATK/2);break;case this.SKILL_TYPE.INVISIBLE:this.getComponent(cc.BoxCollider).enabled=!1,this.player.setInvisible(!0),this.timerUseSkill=c.default.INVISIBLE}},e.prototype.resetKill=function(t){switch(this.isUsingSkill=!1,t){case this.SKILL_TYPE.FREEZE:for(var e=0,n=s.default.Instance.LevelMgr.enemyArr;e<n.length;e++){n[e].getComponent(u.default).setFreeze(!1)}break;case this.SKILL_TYPE.SLOW:for(var o=0,i=s.default.Instance.LevelMgr.enemyArr;o<i.length;o++){i[o].getComponent(u.default).setSlowDown(!1)}c.default.DIR_SPEED=1;break;case this.SKILL_TYPE.RAGE:this.player.increaATK(-this.currentATK/2),this.player.SetRage(!1);break;case this.SKILL_TYPE.INVISIBLE:this.player.setInvisible(!1),this.getComponent(cc.BoxCollider).enabled=!0}},e.prototype.start=function(){this.player=this.getComponent(r.default)},e=i([l],e)}(a.default()));n.default=h,cc._RF.pop()},{"../utils/SingletonNode":"SingletonNode","./Enemy":"Enemy","./GameDefine":"GameDefine","./GameMgr":"GameMgr","./Player":"Player"}],Player:[function(t,e,n){"use strict";cc._RF.push(e,"366c1NVdE9GVItePcrG9zck","Player");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./GameMgr"),s=t("./GameDefine"),c=t("./VoiceInput"),a=t("../ui/UIGame"),u=t("./Enemy"),p=t("./Item"),l=t("../popup/PopupManager"),h=t("./Profile"),d=t("./EnemyMgr"),f=t("../API"),y=t("shake.js"),v=cc._decorator,_=v.ccclass,E=v.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UI_HP_BAR=null,e.UI_HP_BAR_FILL=null,e.RAGE_EFFECT=null,e.UI_HP_BAR_HP=null,e.Spine=null,e.skillSpriteFrame=[],e.currentATK=s.default.PLAYER_BASE_ATK,e.mHp=s.default.PLAYER_BASE_HP,e.mCurrentExp=0,e.mCurrentLV=0,e.mRunningPos=null,e.VoiceInput=null,e.mIsStart=!1,e.mInitHP=0,e._acc=new cc.Vec2(0,0),e._time=0,e.isUsingVoice=!1,e.isUsingBooster=!1,e.rigidBody=null,e.STATE={NOTHING:0,RUNNING:1,TAKEOFF:2,FLY:3,DROP:4},e._mState=0,e.currentTrack=null,e.animSet={Idle:"Idle_Animation",Run:"Run_Animation",Be_Attacked:"Be_attacked",Die:"Die_Animation",Fly_Loop:"Fly_Loop_Animation",Jum_up:"Jump_up_Animation",Jum_down:"Jump_down_Animation"},e.normalSkin="Normal",e.inVisibleSkin="Invisible",e.currentAnim=e.animSet.Idle,e.isAttacked=!1,e.dirShake=0,e.preViousDirShake=0,e.isShaking=!0,e.canShake=!1,e}return o(e,t),Object.defineProperty(e.prototype,"IsUsingVoice",{get:function(){return this.isUsingVoice},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IsUsingBooster",{get:function(){return this.isUsingBooster},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this;this.mRunningPos=this.node.position,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyUp,this),this.VoiceInput=new c.default,this.myShakeEvent=new y({threshold:2,timeout:100});this.canShake=!1,window.addEventListener("shake",function(){t.canShake&&(t.rigidBody.linearVelocity=new cc.Vec2,t.rigidBody.applyForceToCenter(new cc.Vec2(0,16e5),!0))},!1)},e.prototype.SetSkill=function(t){var e=[];t.equippedSkillCodes&&(e=t.equippedSkillCodes.split(","));for(var n=0;n<2;n++){var o=this.convertSkilIndex(e[n]),i=a.default.Instance.SkillContainer.children[n];-1==o?i.active=!1:i.getComponent(cc.Sprite).spriteFrame=this.skillSpriteFrame[o]}},e.prototype.convertSkilIndex=function(t){switch(t){case"FREEZE_ALL":return 0;case"INCR_ATK_50":return 1;case"SLOW_70":return 2;case"INVISIBLE":return 3}return-1},e.prototype.setCompleteAnimEvent=function(){var t=this;this.Spine&&this.Spine.setCompleteListener(function(e,n){if(t.currentTrack==e)switch(e.animation?e.animation.name:""){case t.animSet.Idle:break;case t.animSet.Be_Attacked:t.setAnim(t.animSet.Run);break;case t.animSet.Run:break;case t.animSet.Jum_up:t.setAnim(t.animSet.Fly_Loop);break;case t.animSet.Fly_Loop:case t.animSet.Jum_down:case t.animSet.Die:}})},e.prototype.setAnim=function(t,e){if(void 0===e&&(e=null),this.Spine){var n=!1;switch(t){case this.animSet.Idle:n=!0;break;case this.animSet.Be_Attacked:break;case this.animSet.Run:if(this.currentAnim==t)return;n=!0;break;case this.animSet.Jum_up:break;case this.animSet.Fly_Loop:n=!0;break;case this.animSet.Jum_down:this.setAnim(this.animSet.Run);break;case this.animSet.Die:}this.Spine.setMix(this.currentAnim,t,.6),this.currentTrack=this.Spine.setAnimation(0,t,n),this.currentAnim=t}},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.space:console.log("akjlsfhksjdf"),this.rigidBody.linearVelocity=new cc.Vec2,this.rigidBody.applyForceToCenter(new cc.Vec2(0,16e5),!1)}},e.prototype.onCollisionEnter=function(t,e){if("Water"==t.node.group)this.die(!0);else if("Enemy"==t.node.group){if(t.getComponent(u.default).type==d.EnemyTypes.OWL)return;t.getComponent(u.default).setAttack()}else"Item"==t.node.group&&t.getComponent(p.default).useItem()},e.prototype.start=function(){this.canShake=!1,this.UIMetter=a.default.Instance.UI_METTER,this.rigidBody=this.getComponent(cc.RigidBody),this.init(),a.default.Instance.updateExp(this.mCurrentExp,s.default.LV_UP_PARAM[this.mCurrentLV+1].requireExp),cc.systemEvent.setAccelerometerEnabled(!0),this.setCompleteAnimEvent(),this.setState(this.STATE.NOTHING)},e.prototype.getData=function(){var t=this;f.API.GetInfo(function(e){t.mCurrentLV=e.result.level,t.mCurrentExp=e.result.exp,t.currentATK=e.result.atk,t.mHp=e.result.hp,t.SetSkill(e.result),a.default.Instance.updateExp(t.mCurrentExp,s.default.LV_UP_PARAM[t.mCurrentLV+1].requireExp),t.updateUI()})},e.prototype.init=function(){this.reset(),this.setAnim(this.animSet.Idle)},e.prototype.play=function(){this.setState(this.STATE.RUNNING)},e.prototype.setVoice=function(t){this.isUsingVoice=t},e.prototype.replay=function(){this.onOpenShake(!1),this.isUsingBooster=!1,this.node.setPosition(this.mRunningPos.x,this.mRunningPos.y+100),this.reset(),this.setState(this.STATE.RUNNING)},e.prototype.increaHP=function(t){void 0===t&&(t=1),0!=t&&(this.mHp=t,this.updateUI())},e.prototype.useBooster=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.isUsingBooster=!0,this.increaHP(t),this.increaATK(e),this.updateUI()},e.prototype.reduceHP=function(t){void 0===t&&(t=0),this.isAttacked||(cc.audioEngine.play(r.default.Instance.playerBeAttacked,!1,h.default.Instance.volume),this.isAttacked=!0,this.mHp-=t,this.mHp<=0?(this.die(),this.setAnim(this.animSet.Die)):this.createBlink(5),this.updateUI())},e.prototype.createBlink=function(t){var e=this,n=0;this.Spine.node.color=cc.color("#F7A5A5");var o=setInterval(function(){n++,e.Spine.node.color=n%2==1?cc.color("#FFFFFF"):cc.color("#F7A5A5"),n==t&&(e.Spine.node.color=cc.color("#FFFFFF"),e.isAttacked=!1,clearInterval(o))},200)},e.prototype.killEnemy=function(t,e){void 0===e&&(e=0),this.mCurrentExp+=t,this.mCurrentLV<=s.default.PLAYER_MAX_LV&&this.mCurrentExp>=s.default.LV_UP_PARAM[this.mCurrentLV+1].requireExp&&(this.mCurrentLV++,this.mCurrentExp=s.default.LV_UP_PARAM[this.mCurrentLV].requireExp-this.mCurrentExp,this.currentATK=s.default.LV_UP_PARAM[this.mCurrentLV].atk),a.default.Instance.updateExp(this.mCurrentExp,s.default.LV_UP_PARAM[this.mCurrentLV+1].requireExp),this.updateUI()},e.prototype.updateUI=function(){a.default.Instance.updateATK(this.currentATK),this.updateUIHP()},e.prototype.updateUIHP=function(){this.mHp=Math.floor(10*this.mHp)/10;var t=(this.mInitHP-Math.min(this.mInitHP,this.mHp))*this.UI_HP_BAR_FILL.width/this.mInitHP;this.UI_HP_BAR_FILL.children[0].setPosition(new cc.Vec3(-t,0,0)),this.UI_HP_BAR_HP.string=this.mHp+" / "+this.mInitHP},e.prototype.increaATK=function(t){void 0===t&&(t=1),0!=t&&(this.currentATK=t,this.updateUI())},e.prototype.reset=function(){this.mHp=s.default.PLAYER_BASE_HP,this.currentATK=s.default.PLAYER_BASE_ATK,this.getData(),this.mInitHP=this.mHp,this.UI_HP_BAR_FILL.active=!0,this.UI_HP_BAR.active=!0,this.currentAnim=this.animSet.Idle,this.isAttacked=!1,this.rigidBody.gravityScale=s.default.GRAVITY_DOWN,this.setInvisible(!1),this.SetRage(!1),this.updateUI()},e.prototype.setInvisible=function(t){this.Spine.setSkin(t?this.inVisibleSkin:this.normalSkin)},e.prototype.SetRage=function(t){this.RAGE_EFFECT.active=t},e.prototype.killLantern=function(){Math.random()>.5?this.increaATK():this.increaHP(),this.updateUIHP()},e.prototype.die=function(t){void 0===t&&(t=!1),this.mHp=0,this.updateUI(),t&&(this.node.active=!1),r.default.Instance.endGame(),this.UI_HP_BAR_FILL.active=!1,this.UI_HP_BAR.active=!1},e.prototype.setState=function(t){switch(this._mState=t,this._mState){case this.STATE.NOTHING:this.UIMetter.active=!1;break;case this.STATE.RUNNING:this.rigidBody.type=cc.RigidBodyType.Dynamic,this.UIMetter.active=!1,this.setAnim(this.animSet.Run);break;case this.STATE.TAKEOFF:a.default.Instance.setActiveSkillContainer(!1),this.rigidBody.type=cc.RigidBodyType.Dynamic,this.setAnim(this.animSet.Jum_up),this.isUsingVoice||this.onOpenShake(!0),this.rigidBody.gravityScale=s.default.GRAVITY_DOWN,this.UIMetter.active=!0;break;case this.STATE.DROP:a.default.Instance.setActiveSkillContainer(!0),this.onOpenShake(!1),this.setAnim(this.animSet.Jum_down),this.rigidBody.gravityScale=s.default.GRAVITY_DOWN,this.rigidBody.linearVelocity=new cc.Vec2,this.UIMetter.active=!1,r.default.Instance.LevelMgr.CreateNextWave(2.5*s.default.SPEED_PLAYER_NORMAL);break;case this.STATE.FLY:this.UIMetter.active=!1}},e.prototype.onOpenShake=function(t){t?(this.canShake=!0,this.myShakeEvent.start()):(this.canShake=!1,this.myShakeEvent.stop())},e.prototype.onDestroy=function(){cc.systemEvent.setAccelerometerEnabled(!1),cc.systemEvent.off(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this)},e.prototype.onDeviceMotionEvent=function(t){this._acc.x=t.acc.x,this._acc.y=t.acc.y},e.prototype.update=function(t){if(!r.default.Instance.IsPause())switch(this._mState){case this.STATE.NOTHING:break;case this.STATE.RUNNING:if(r.default.Instance.Ground.getWaterToDrop()<this.node.x)break;var e=r.default.Instance.Ground.getWaterToFly();e&&e-r.default.Instance.CanvasWidth/5<this.node.x&&this.setState(this.STATE.TAKEOFF);break;case this.STATE.TAKEOFF:var n=s.default.GRAVITY_DOWN;if(this.VoiceInput&&this.isUsingVoice)Math.round(1e4*this.VoiceInput.GetVolume())/1e4>.3&&(this.rigidBody.linearVelocity.y<0&&(this.rigidBody.linearVelocity=new cc.Vec2),n=-s.default.GRAVITY_UP),this.updateUIMetter(Math.round(10*this.VoiceInput.GetVolume())/10),this.rigidBody.gravityScale=1*n;else this.isUsingVoice||(this.isShaking?this.dirShake=-s.default.GRAVITY_UP:this.dirShake=s.default.GRAVITY_DOWN,this.dirShake=s.default.GRAVITY_DOWN,this.rigidBody.gravityScale=1*this.dirShake);this.node.y>r.default.Instance.CanvasHeight*s.default.PLAYER_MAX_JUMP_HEIGHT/100&&(this.node.y=r.default.Instance.CanvasHeight*s.default.PLAYER_MAX_JUMP_HEIGHT/100,this.rigidBody.linearVelocity=new cc.Vec2);var o=r.default.Instance.Ground.getWaterToFly();o&&o<this.node.x&&this.setState(this.STATE.FLY);break;case this.STATE.FLY:n=s.default.GRAVITY_DOWN;if(this.VoiceInput&&this.isUsingVoice)Math.round(1e4*this.VoiceInput.GetVolume())/1e4>.3&&(this.rigidBody.linearVelocity.y<0&&(this.rigidBody.linearVelocity=new cc.Vec2),n=-s.default.GRAVITY_UP),this.updateUIMetter(Math.round(10*this.VoiceInput.GetVolume())/10),this.rigidBody.gravityScale=1*n;else this.isUsingVoice||(this.isShaking?this.dirShake=-s.default.GRAVITY_UP:this.dirShake=s.default.GRAVITY_DOWN,this.dirShake=s.default.GRAVITY_DOWN,this.rigidBody.gravityScale=1*this.dirShake);this.node.y>r.default.Instance.CanvasHeight*s.default.PLAYER_MAX_JUMP_HEIGHT/100&&(this.node.y=r.default.Instance.CanvasHeight*s.default.PLAYER_MAX_JUMP_HEIGHT/100,this.rigidBody.linearVelocity=new cc.Vec2);var i=r.default.Instance.Ground.getWaterToDrop()+30;null!=i&&i<=this.node.x&&this.setState(this.STATE.DROP),this.checkFly();break;case this.STATE.DROP:var c=-s.default.PLAYER_DROP_DOWN_SPEED*r.default.Instance.CanvasHeight/100;this.node.setPosition(this.node.position.add(new cc.Vec3(0,c*t,0))),this.node.y<=this.mRunningPos.y&&(this.node.y=this.mRunningPos.y,this.setState(this.STATE.RUNNING),l.default.Instance.ShowEnemiesComming(2.5))}},e.prototype.checkFly=function(){},e.prototype.updateUIMetter=function(t){var e=this.UIMetter.height;this.UIMetter.children[1].y=(t-.5)*e},i([E(cc.Node)],e.prototype,"UI_HP_BAR",void 0),i([E(cc.Node)],e.prototype,"UI_HP_BAR_FILL",void 0),i([E(cc.Node)],e.prototype,"RAGE_EFFECT",void 0),i([E(cc.Label)],e.prototype,"UI_HP_BAR_HP",void 0),i([E(sp.Skeleton)],e.prototype,"Spine",void 0),i([E([cc.SpriteFrame])],e.prototype,"skillSpriteFrame",void 0),e=i([_],e)}(cc.Component);n.default=m,cc._RF.pop()},{"../API":"API","../popup/PopupManager":"PopupManager","../ui/UIGame":"UIGame","./Enemy":"Enemy","./EnemyMgr":"EnemyMgr","./GameDefine":"GameDefine","./GameMgr":"GameMgr","./Item":"Item","./Profile":"Profile","./VoiceInput":"VoiceInput","shake.js":1}],PopupBoosterPack:[function(t,e,n){"use strict";cc._RF.push(e,"1b8des892tLUrI9oxzNkgdN","PopupBoosterPack");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../API"),s=t("../game/Profile"),c=t("./PopupManager"),a=cc._decorator,u=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ButtonCloseBooster=null,e.ButtonBuyATK=null,e.ButtonBuyHP=null,e.ButtonBuyStick=null,e.userSticks=null,e}return o(e,t),e.prototype.start=function(){this.updateStick(s.default.Instance.UserData)},e.prototype.onLoad=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){return c.default.Instance.CloseBooster()}),this.ButtonCloseBooster.on(cc.Node.EventType.TOUCH_END,function(){return c.default.Instance.CloseBooster()}),this.ButtonBuyATK.on(cc.Node.EventType.TOUCH_END,function(){return t.buyATK()}),this.ButtonBuyHP.on(cc.Node.EventType.TOUCH_END,function(){return t.buyHP()}),this.ButtonBuyStick.on(cc.Node.EventType.TOUCH_END,function(){return t.buyStick()}),this.ButtonCloseBooster.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.ButtonBuyATK.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.ButtonBuyHP.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.ButtonBuyStick.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()})},e.prototype.playBtnSound=function(){s.default.Instance.playButtonSound()},e.prototype.buyATK=function(){var t=this;r.API.AddBuff("ATK_BUFF_10",function(e){e&&(t.updateStick(e.result.player),c.default.Instance.BuyATK(0,e.result.hero.atk))})},e.prototype.buyHP=function(){var t=this;r.API.AddBuff("HP_BUFF_10",function(e){e&&(t.updateStick(e.result.player),c.default.Instance.BuyHP(e.result.hero.hp,0))})},e.prototype.buyStick=function(){c.default.Instance.ShowBuySticks()},e.prototype.updateStick=function(t){this.userSticks.string=t.balance},i([p(cc.Node)],e.prototype,"ButtonCloseBooster",void 0),i([p(cc.Node)],e.prototype,"ButtonBuyATK",void 0),i([p(cc.Node)],e.prototype,"ButtonBuyHP",void 0),i([p(cc.Node)],e.prototype,"ButtonBuyStick",void 0),i([p(cc.Label)],e.prototype,"userSticks",void 0),e=i([u],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../API":"API","../game/Profile":"Profile","./PopupManager":"PopupManager"}],PopupBuyStick:[function(t,e,n){"use strict";cc._RF.push(e,"be4b0c3YOVA1Lrx70TBZToo","PopupBuyStick");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../game/Profile"),s=cc._decorator,c=s.ccclass,a=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ButtonBuyStick=null,e.userSticks=null,e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.ButtonBuyStick.on(cc.Node.EventType.TOUCH_END,function(){return t.buyStick()}),this.ButtonBuyStick.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()})},e.prototype.playBtnSound=function(){r.default.Instance.playButtonSound()},e.prototype.start=function(){this.updateStick(r.default.Instance.UserData)},e.prototype.buyStick=function(){},e.prototype.updateStick=function(t){this.userSticks.string=t.balance},i([a(cc.Node)],e.prototype,"ButtonBuyStick",void 0),i([a(cc.Label)],e.prototype,"userSticks",void 0),e=i([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../game/Profile":"Profile"}],PopupCollection:[function(t,e,n){"use strict";cc._RF.push(e,"54410oWlaJCkLbMoKuFuxLx","PopupCollection");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../game/Profile"),s=cc._decorator,c=s.ccclass,a=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collectionBase=null,e.userScore=null,e.userBestWave=null,e.userBaseHP=null,e.userBaseAtk=null,e.userLevel=null,e}return o(e,t),e.prototype.start=function(){this.updateLevel(r.default.Instance.UserData)},e.prototype.updateCollectedItem=function(){},e.prototype.updateLevel=function(t){this.userScore.string=t.highScore,this.userBestWave.string=t.highWave,this.userBaseHP.string=t.hp,this.userBaseAtk.string=t.atk,this.userLevel.string=t.level},i([a(cc.Node)],e.prototype,"collectionBase",void 0),i([a(cc.Label)],e.prototype,"userScore",void 0),i([a(cc.Label)],e.prototype,"userBestWave",void 0),i([a(cc.Label)],e.prototype,"userBaseHP",void 0),i([a(cc.Label)],e.prototype,"userBaseAtk",void 0),i([a(cc.Label)],e.prototype,"userLevel",void 0),e=i([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../game/Profile":"Profile"}],PopupEngame:[function(t,e,n){"use strict";cc._RF.push(e,"7216dIdvXdJAqKa08Zzm5kO","PopupEngame");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../API"),s=t("../game/GameMgr"),c=t("../game/Profile"),a=t("./PopupManager"),u=cc._decorator,p=u.ccclass,l=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BtnPlayAgain=null,e.BtnHome=null,e.BtnShareFB=null,e.BtnStore=null,e.BtnGG=null,e.BtnLeaderBoard=null,e.BtnHistory=null,e.BtnCollections=null,e.levelUp=null,e.SkillContainer=null,e.userScore=null,e.userBestWave=null,e.userBaseHP=null,e.userBaseAtk=null,e.userLevel=null,e.skillSpriteFrame=[],e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.BtnPlayAgain.on(cc.Node.EventType.TOUCH_END,function(){return s.default.Instance.onGameReplay()}),this.BtnStore.on(cc.Node.EventType.TOUCH_END,function(){return a.default.Instance.ShowOtherScreen(null,"store")}),this.BtnGG.on(cc.Node.EventType.TOUCH_END,function(){return a.default.Instance.ShowOtherScreen(null,"gg")}),this.BtnLeaderBoard.on(cc.Node.EventType.TOUCH_END,function(){return a.default.Instance.ShowOtherScreen(null,"leaderBoard")}),this.BtnHistory.on(cc.Node.EventType.TOUCH_END,function(){return a.default.Instance.ShowOtherScreen(null,"history")}),this.BtnCollections.on(cc.Node.EventType.TOUCH_END,function(){return a.default.Instance.ShowOtherScreen(null,"collection")}),this.BtnHome.on(cc.Node.EventType.TOUCH_END,function(){}),this.BtnShareFB.on(cc.Node.EventType.TOUCH_END,function(){}),this.BtnPlayAgain.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.BtnStore.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.BtnGG.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.BtnLeaderBoard.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.BtnHistory.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.BtnCollections.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.BtnHome.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.BtnShareFB.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()})},e.prototype.playBtnSound=function(){c.default.Instance.playButtonSound()},e.prototype.start=function(){var t=this;this.skillSpriteFrame=s.default.Instance.Player.skillSpriteFrame,this.updateLevel(c.default.Instance.UserData),r.API.GetInfo(function(e){t.SetSkill(e.result),t.updateLevel(e.result)})},e.prototype.updateLevel=function(t){this.userScore.string=t.highScore,this.userBestWave.string=t.highWave,this.userBaseHP.string=t.hp,this.userBaseAtk.string=t.atk,this.userLevel.string=t.level},e.prototype.SetSkill=function(t){var e=[];t.equippedSkillCodes&&(e=t.equippedSkillCodes.split(","));for(var n=0;n<2;n++){var o=this.convertSkilIndex(e[n]),i=this.SkillContainer.children[n];-1==o?i.active=!1:i.getComponent(cc.Sprite).spriteFrame=this.skillSpriteFrame[o]}},e.prototype.convertSkilIndex=function(t){switch(t){case"FREEZE_ALL":return 0;case"INCR_ATK_50":return 1;case"SLOW_70":return 2;case"INVISIBLE":return 3}return-1},i([l(cc.Node)],e.prototype,"BtnPlayAgain",void 0),i([l(cc.Node)],e.prototype,"BtnHome",void 0),i([l(cc.Node)],e.prototype,"BtnShareFB",void 0),i([l(cc.Node)],e.prototype,"BtnStore",void 0),i([l(cc.Node)],e.prototype,"BtnGG",void 0),i([l(cc.Node)],e.prototype,"BtnLeaderBoard",void 0),i([l(cc.Node)],e.prototype,"BtnHistory",void 0),i([l(cc.Node)],e.prototype,"BtnCollections",void 0),i([l(cc.Node)],e.prototype,"levelUp",void 0),i([l(cc.Node)],e.prototype,"SkillContainer",void 0),i([l(cc.Label)],e.prototype,"userScore",void 0),i([l(cc.Label)],e.prototype,"userBestWave",void 0),i([l(cc.Label)],e.prototype,"userBaseHP",void 0),i([l(cc.Label)],e.prototype,"userBaseAtk",void 0),i([l(cc.Label)],e.prototype,"userLevel",void 0),i([l([cc.SpriteFrame])],e.prototype,"skillSpriteFrame",void 0),e=i([p],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../API":"API","../game/GameMgr":"GameMgr","../game/Profile":"Profile","./PopupManager":"PopupManager"}],PopupHistory:[function(t,e,n){"use strict";cc._RF.push(e,"83d64UTpFBDKpI7srRExwdg","PopupHistory");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../game/Profile"),s=cc._decorator,c=s.ccclass,a=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ReceivedGiftFrame=[],e.TurnContainer=null,e.ReceivedGiftContainer=null,e.LuckyCodeContainer=null,e.EmoneyContainer=null,e.userScore=null,e.userBestWave=null,e.userBaseHP=null,e.userBaseAtk=null,e.userLevel=null,e.BtnArr=[],e}return o(e,t),e.prototype.onLoad=function(){for(var t=this,e=0,n=this.BtnArr;e<n.length;e++){n[e].on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()})}},e.prototype.playBtnSound=function(){r.default.Instance.playButtonSound()},e.prototype.start=function(){this.updateLevel(r.default.Instance.UserData)},e.prototype.changeContent=function(t,e){for(var n=0,o=this.TableContent.children;n<o.length;n++){o[n].active=!1}this.TableContent.children[parseInt(e)].active=!0},e.prototype.loadTurn=function(){},e.prototype.loadPrize=function(){},e.prototype.loadReceivedGift=function(){},e.prototype.loadLuckyCode=function(){},e.prototype.loadEmoney=function(){},e.prototype.updateLevel=function(t){this.userScore.string=t.highScore,this.userBestWave.string=t.highWave,this.userBaseHP.string=t.hp,this.userBaseAtk.string=t.atk,this.userLevel.string=t.level},i([a(cc.Node)],e.prototype,"TableContent",void 0),i([a(cc.Prefab)],e.prototype,"History_Turn",void 0),i([a(cc.Prefab)],e.prototype,"History_ReceivedGift",void 0),i([a(cc.Prefab)],e.prototype,"History_LuckyCode",void 0),i([a(cc.Prefab)],e.prototype,"History_Emoney",void 0),i([a(cc.SpriteFrame)],e.prototype,"ReceivedGiftFrame",void 0),i([a(cc.Node)],e.prototype,"TurnContainer",void 0),i([a(cc.Node)],e.prototype,"ReceivedGiftContainer",void 0),i([a(cc.Node)],e.prototype,"LuckyCodeContainer",void 0),i([a(cc.Node)],e.prototype,"EmoneyContainer",void 0),i([a(cc.Label)],e.prototype,"userScore",void 0),i([a(cc.Label)],e.prototype,"userBestWave",void 0),i([a(cc.Label)],e.prototype,"userBaseHP",void 0),i([a(cc.Label)],e.prototype,"userBaseAtk",void 0),i([a(cc.Label)],e.prototype,"userLevel",void 0),i([a(cc.Node)],e.prototype,"BtnArr",void 0),e=i([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../game/Profile":"Profile"}],PopupHowToPlayAndroid:[function(t,e,n){"use strict";cc._RF.push(e,"24432ZlBrNMqYZVD9+wM62R","PopupHowToPlayAndroid");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../game/Profile"),s=t("./PopupManager"),c=cc._decorator,a=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ButtonUseVoice=null,e.ButtonUseHand=null,e.ButtonConfimNoVoice=null,e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.ButtonUseVoice.on(cc.Node.EventType.TOUCH_END,function(){return s.default.Instance.SelectMode(null,1)}),this.ButtonUseHand.on(cc.Node.EventType.TOUCH_END,function(){return s.default.Instance.SelectMode(null,0)}),this.ButtonConfimNoVoice.on(cc.Node.EventType.TOUCH_END,function(){return s.default.Instance.SelectMode(null,0)}),this.ButtonUseVoice.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.ButtonUseHand.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.ButtonConfimNoVoice.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()})},e.prototype.playBtnSound=function(){r.default.Instance.playButtonSound()},i([u(cc.Node)],e.prototype,"ButtonUseVoice",void 0),i([u(cc.Node)],e.prototype,"ButtonUseHand",void 0),i([u(cc.Node)],e.prototype,"ButtonConfimNoVoice",void 0),e=i([a],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../game/Profile":"Profile","./PopupManager":"PopupManager"}],PopupLeaderBoard:[function(t,e,n){"use strict";cc._RF.push(e,"210af+KkshPL4+owfMwhi7h","PopupLeaderBoard");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../game/Profile"),s=cc._decorator,c=s.ccclass,a=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.StarBg=[],e.StarMedal=[],e.StarContainer=[],e.ScoreContainer=[],e.WinnerContainer=[],e.userScore=null,e.userBestWave=null,e.userBaseHP=null,e.userBaseAtk=null,e.userLevel=null,e.userId=null,e.userHighScore=null,e.userRank=null,e.BtnArr=[],e}return o(e,t),e.prototype.onLoad=function(){for(var t=this,e=0,n=this.BtnArr;e<n.length;e++){n[e].on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()})}},e.prototype.playBtnSound=function(){r.default.Instance.playButtonSound()},e.prototype.start=function(){this.updateLevel(r.default.Instance.UserData)},e.prototype.changeContent=function(t,e){for(var n=0,o=this.TableContent.children;n<o.length;n++){o[n].active=!1}this.TableContent.children[parseInt(e)].active=!0},e.prototype.loadStar=function(){},e.prototype.loadScore=function(){},e.prototype.loadWinner=function(){},e.prototype.updateScoreRank=function(t){this.userId.string=t.userId,this.userHighScore.string=t.highScore,this.userRank.string=t.currentRank},e.prototype.updateLevel=function(t){this.userScore.string=t.highScore,this.userBestWave.string=t.highWave,this.userBaseHP.string=t.hp,this.userBaseAtk.string=t.atk,this.userLevel.string=t.level},i([a(cc.Node)],e.prototype,"TableContent",void 0),i([a(cc.Prefab)],e.prototype,"LB_Star",void 0),i([a(cc.Prefab)],e.prototype,"LB_WinnerPrize",void 0),i([a(cc.Prefab)],e.prototype,"LB_PreniumPrize",void 0),i([a(cc.SpriteFrame)],e.prototype,"StarBg",void 0),i([a(cc.SpriteFrame)],e.prototype,"StarMedal",void 0),i([a(cc.Node)],e.prototype,"StarContainer",void 0),i([a(cc.Node)],e.prototype,"ScoreContainer",void 0),i([a(cc.Node)],e.prototype,"WinnerContainer",void 0),i([a(cc.Label)],e.prototype,"userScore",void 0),i([a(cc.Label)],e.prototype,"userBestWave",void 0),i([a(cc.Label)],e.prototype,"userBaseHP",void 0),i([a(cc.Label)],e.prototype,"userBaseAtk",void 0),i([a(cc.Label)],e.prototype,"userLevel",void 0),i([a(cc.Label)],e.prototype,"userId",void 0),i([a(cc.Label)],e.prototype,"userHighScore",void 0),i([a(cc.Label)],e.prototype,"userRank",void 0),i([a(cc.Node)],e.prototype,"BtnArr",void 0),e=i([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../game/Profile":"Profile"}],PopupManager:[function(t,e,n){"use strict";cc._RF.push(e,"273dbqQMpdNopjuQXG/u2q3","PopupManager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.Popups=void 0;var r,s=t("../API"),c=t("../game/GameMgr"),a=t("../utils/Helper"),u=t("../utils/SingletonNode"),p=t("../utils/Timer"),l=cc._decorator,h=l.ccclass,d=l.property;(function(t){t[t.BoosterPack=0]="BoosterPack",t[t.BuySticks=1]="BuySticks",t[t.Endgame=2]="Endgame",t[t.EnemyComming=3]="EnemyComming",t[t.History=4]="History",t[t.GuideAndroid=5]="GuideAndroid",t[t.GuideIOS=6]="GuideIOS",t[t.LeaderBoard=7]="LeaderBoard",t[t.Oops=8]="Oops",t[t.StoreEquipment=9]="StoreEquipment",t[t.WaterComming=10]="WaterComming",t[t.Collection=11]="Collection",t[t.GiftGuide=12]="GiftGuide"})(r=n.Popups||(n.Popups={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PopupBackground=null,e.PopupContainer=null,e.ShownPopups=null,e.PopupPrefabs=[],e.isBoughtHp=!1,e.isBoughtAtk=!1,e.countDown=null,e.STATE={NOTHING:0,SHOW_END_GAME:1,SHOW_SELECT_MODE:2,SHOW_WATER_COMMING:3,SHOW_OOPS:4,SHOW_ENEMIES_COMMING:5,SHOW_BOOSTER_PACK:6,SHOW_BUY_STICK:7,SHOW_LEADERBOARD:8,SHOW_HISTORY:9,SHOW_COLLECTION:10,SHOW_STORE:11,SHOW_GG:12},e.mState=0,e.mPreviousState=0,e}var n;return o(e,t),n=e,e.push=function(t){var e=this.Instance,n=e.PopupContainer.getChildByName(r[t]);n&&(e.usePopup(n),e.animate(!0,n),e.PopupBackground.active=!0)},e.pop=function(){var t=this.Instance;if(t.ShownPopups.children.length>0){var e=t.ShownPopups.children[t.ShownPopups.children.length-1];t.animate(!1,e)}},e.hide=function(t){var e=this.Instance,n=e.ShownPopups.getChildByName(r[t]);n&&e.animate(!1,n)},e.getPopup=function(t){var e=this.Instance,n=e.PopupContainer.getChildByName(r[t]);return n||e.ShownPopups.getChildByName(r[t])},e.prototype.onLoad=function(){t.prototype.onLoad.call(this);for(var e=0;e<this.PopupPrefabs.length;e++)this.PopupContainer.addChild(cc.instantiate(this.PopupPrefabs[e]))},e.prototype.start=function(){this.PopupBackground.active=!1,this.PopupContainer.active=!1,this.Oops=n.getPopup(r.Oops),this.selectMode=n.getPopup(r.GuideAndroid),this.selectModeIOS=n.getPopup(r.GuideIOS),this.waterComming=n.getPopup(r.WaterComming),this.enemiesComming=n.getPopup(r.EnemyComming),this.endGame=n.getPopup(r.Endgame),this.booster=n.getPopup(r.BoosterPack),this.noVoice=this.selectMode.getChildByName("Contain").getChildByName("No Voice Container"),this.buySticks=n.getPopup(r.BuySticks),this.leaderBoard=n.getPopup(r.LeaderBoard),this.history=n.getPopup(r.History),this.collection=n.getPopup(r.Collection),this.store=n.getPopup(r.StoreEquipment),this.GG=n.getPopup(r.GiftGuide),this.countDown=new p.default;var t=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g);this.selectMode=t?this.selectModeIOS:this.selectMode},e.prototype.animate=function(t,e){var n=this;if(t){i=(o=["bounceOut","quadOut","backOut"])[a.default.RandInt(0,o.length-1)];e.setScale(0),cc.tween(e).by(.3,{scale:1},{easing:i}).start()}else{var o,i=(o=["bounceOut","quadOut","backOut"])[a.default.RandInt(0,o.length-1)];cc.tween(e).to(.3,{scale:0},{easing:"quadIn"}).call(function(){n.returnPopup(e),n.PopupBackground.active=n.ShownPopups.children.length>0}).start()}},e.prototype.usePopup=function(t){this.PopupContainer.removeChild(t,!1),this.ShownPopups.addChild(t)},e.prototype.returnPopup=function(t){this.ShownPopups.removeChild(t,!1),this.PopupContainer.addChild(t)},Object.defineProperty(e.prototype,"isShowingPopup",{get:function(){return this.ShownPopups.children.length>0},enumerable:!1,configurable:!0}),e.prototype.setState=function(t){switch(this.mState=t,this.mState){case this.STATE.NOTHING:break;case this.STATE.SHOW_END_GAME:n.push(r.Endgame);break;case this.STATE.SHOW_OOPS:n.push(r.Oops);break;case this.STATE.SHOW_BOOSTER_PACK:n.push(r.BoosterPack);break;case this.STATE.SHOW_BUY_STICK:n.push(r.BuySticks);break;case this.STATE.SHOW_SELECT_MODE:n.push(r.GuideAndroid);break;case this.STATE.SHOW_ENEMIES_COMMING:this.enemiesComming.children[1].children[5].getComponent(cc.Label).string="WAVE - "+c.default.Instance.LevelMgr.waveCount,n.push(r.EnemyComming);break;case this.STATE.SHOW_WATER_COMMING:setTimeout(function(){n.push(r.WaterComming)},1e3),this.waterComming.children[1].children[2].active=c.default.Instance.Player.IsUsingVoice,this.waterComming.children[1].children[3].active=!c.default.Instance.Player.IsUsingVoice;break;case this.STATE.SHOW_LEADERBOARD:n.push(r.LeaderBoard);break;case this.STATE.SHOW_HISTORY:n.push(r.History);break;case this.STATE.SHOW_COLLECTION:n.push(r.Collection);break;case this.STATE.SHOW_STORE:n.push(r.StoreEquipment);break;case this.STATE.SHOW_GG:n.push(r.GiftGuide)}},e.prototype.ShowOops=function(){this.countDown.SetDuration(5),this.setState(this.STATE.SHOW_OOPS)},e.prototype.ShowWaterComming=function(t){this.countDown.SetDuration(t),this.setState(this.STATE.SHOW_WATER_COMMING)},e.prototype.ShowHowToPlay=function(){this.setState(this.STATE.SHOW_SELECT_MODE)},e.prototype.ShowBooster=function(){this.setState(this.STATE.SHOW_BOOSTER_PACK)},e.prototype.ShowEnemiesComming=function(t){this.countDown.SetDuration(t),c.default.Instance.LevelMgr.ShowWaveUI(),this.setState(this.STATE.SHOW_ENEMIES_COMMING)},e.prototype.ShowEndGame=function(){s.API.Endgame(function(t){}),this.setState(this.STATE.SHOW_END_GAME)},e.prototype.ShowOtherScreen=function(t,e){this.mPreviousState=this.mState;var n=this.STATE.SHOW_LEADERBOARD;switch(e){case"history":n=this.STATE.SHOW_HISTORY;break;case"gg":n=this.STATE.SHOW_GG;break;case"store":n=this.STATE.SHOW_STORE;break;case"collection":n=this.STATE.SHOW_COLLECTION}this.setState(n)},e.prototype.ShowBuySticks=function(){this.mPreviousState=this.mState,n.pop(),this.setState(this.STATE.SHOW_BUY_STICK)},e.prototype.ShowConfirm=function(){this.buySticks.children[2].active=!0},e.prototype.ConfirmBuyStick=function(t,e){parseInt(e),this.buySticks.children[2].active=!1,this.HideBuyStick()},e.prototype.HideBuyStick=function(){this.mPreviousState==this.mState&&(this.mPreviousState=this.STATE.NOTHING),n.pop(),this.setState(this.mPreviousState)},e.prototype.SelectMode=function(t,e){var o=this;1==parseInt(e)?(console.log("check voice"),c.default.Instance.Player.VoiceInput.GetMicPermission(function(t){t?(c.default.Instance.Player.setVoice(1==parseInt(e)),o.noVoice.active=!1,n.pop(),o.ShowBooster()):o.noVoice.active=!0})):(c.default.Instance.Player.setVoice(1==parseInt(e)),this.noVoice.active=!1,n.pop(),this.ShowBooster())},e.prototype.BuyHP=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.isBoughtHp||(this.isBoughtHp=!0,c.default.Instance.Player.useBooster(t,e))},e.prototype.BuyATK=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.isBoughtAtk||(this.isBoughtAtk=!0,c.default.Instance.Player.useBooster(t,e))},e.prototype.CloseBooster=function(){c.default.Instance.StartGame(),n.pop(),this.ShowEnemiesComming(3.5)},e.prototype.resetAll=function(t,e){for(void 0===t&&(t=null),void 0===e&&(e=0);this.ShownPopups.children.length>0;)n.pop();1!=e&&this.setState(this.STATE.NOTHING)},e.prototype.update=function(t){switch(this.mState){case this.STATE.NOTHING:case this.STATE.SHOW_END_GAME:case this.STATE.SHOW_SELECT_MODE:break;case this.STATE.SHOW_OOPS:this.countDown.Update(t),this.updateUIOops(),this.countDown.IsDone()&&this.ShowEndGame();break;case this.STATE.SHOW_ENEMIES_COMMING:this.countDown.Update(t),this.updateUIEnemyCountDown(),this.countDown.IsDone()&&(n.pop(),this.setState(this.STATE.NOTHING));break;case this.STATE.SHOW_WATER_COMMING:this.countDown.Update(t),this.updateUIWaterCountDown(),this.countDown.IsDone()&&(n.pop(),this.setState(this.STATE.NOTHING))}},e.prototype.updateUIWaterCountDown=function(){this.waterComming.children[2].getComponent(cc.Label).string=""+Math.round(this.countDown.GetTime())},e.prototype.updateUIEnemyCountDown=function(){this.enemiesComming.children[1].children[4].getComponent(cc.Label).string=""+Math.round(this.countDown.GetTime())},e.prototype.updateUIOops=function(){this.Oops.children[1].children[3].getComponent(cc.Label).string=""+Math.round(this.countDown.GetTime())},i([d(cc.Node)],e.prototype,"PopupBackground",void 0),i([d(cc.Node)],e.prototype,"PopupContainer",void 0),i([d(cc.Node)],e.prototype,"ShownPopups",void 0),i([d(cc.Prefab)],e.prototype,"PopupPrefabs",void 0),e=n=i([h],e)}(u.default());n.default=f,cc._RF.pop()},{"../API":"API","../game/GameMgr":"GameMgr","../utils/Helper":"Helper","../utils/SingletonNode":"SingletonNode","../utils/Timer":"Timer"}],PopupRevive:[function(t,e,n){"use strict";cc._RF.push(e,"618d8dGRsxNCpazIJ2wvNj1","PopupRevive");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../API"),s=t("../game/GameMgr"),c=t("../game/Profile"),a=t("./PopupManager"),u=cc._decorator,p=u.ccclass,l=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BtnRevive=null,e.ButtonBuyStick=null,e.ButtonClose=null,e.userSticks=null,e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.ButtonClose.on(cc.Node.EventType.TOUCH_END,function(){return a.default.Instance.ShowEndGame()}),this.BtnRevive.on(cc.Node.EventType.TOUCH_END,function(){return t.onRevival()}),this.ButtonBuyStick.on(cc.Node.EventType.TOUCH_END,function(){return t.buyStick()}),this.ButtonClose.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.BtnRevive.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.ButtonBuyStick.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()})},e.prototype.playBtnSound=function(){c.default.Instance.playButtonSound()},e.prototype.start=function(){var t=this;r.API.GetInfo(function(e){e&&t.updateStick(e.result)})},e.prototype.onRevival=function(){s.default.Instance.onRevival()},e.prototype.buyStick=function(){},e.prototype.updateStick=function(t){this.userSticks.string=t.balance},i([l(cc.Node)],e.prototype,"BtnRevive",void 0),i([l(cc.Node)],e.prototype,"ButtonBuyStick",void 0),i([l(cc.Node)],e.prototype,"ButtonClose",void 0),i([l(cc.Label)],e.prototype,"userSticks",void 0),e=i([p],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../API":"API","../game/GameMgr":"GameMgr","../game/Profile":"Profile","./PopupManager":"PopupManager"}],PopupStore:[function(t,e,n){"use strict";cc._RF.push(e,"23726hUzrdBWrfNELa3qdkj","PopupStore");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../API"),s=t("../game/Profile"),c=t("./SkillContainer"),a=cc._decorator,u=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ButtonBuyStick=null,e.BtnBuyTurn=null,e.SkillContainer=[],e.userScore=null,e.userBestWave=null,e.userBaseHP=null,e.userBaseAtk=null,e.userLevel=null,e.userSticks=null,e.userTurn=null,e.userTotalTurn=null,e.skillSlot=[],e.skillStore=[],e.skillEquiped=[],e.isSkillRemoving=!1,e.isSkillBuying=!1,e.isSkillEquiping=!1,e.isChangingSkill=!1,e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.ButtonBuyStick.on(cc.Node.EventType.TOUCH_END,function(){return t.buyStick()}),this.BtnBuyTurn.on(cc.Node.EventType.TOUCH_END,function(){return t.buyTurn()}),this.ButtonBuyStick.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.BtnBuyTurn.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()})},e.prototype.playBtnSound=function(){s.default.Instance.playButtonSound()},e.prototype.start=function(){var t=this;r.API.GetInfo(function(e){e&&t.UpdateUI(e)})},e.prototype.UpdateUI=function(t){this.updateLevel(t.result),this.updateStick(t.result),this.updateTurn(t.result),this.updateSkillEquiped(t.result),this.updateSkillCode(t.result)},e.prototype.buyStick=function(){},e.prototype.buyTurn=function(){},e.prototype.unEquipSkill=function(){},e.prototype.updateLevel=function(t){this.userScore.string=t.highScore,this.userBestWave.string=t.highWave,this.userBaseHP.string=t.hp,this.userBaseAtk.string=t.atk,this.userLevel.string=t.level},e.prototype.updateStick=function(t){this.userSticks.string=t.balance},e.prototype.updateTurn=function(t){this.userTurn.string=t.freeTurn+"/"+t.freeTurn,this.userTotalTurn.string=t.freeTurn},e.prototype.updateSkillEquiped=function(t){for(var e=0,n=this.skillSlot[0].children;e<n.length;e++){n[e].active=!1}for(var o=0,i=this.skillSlot[1].children;o<i.length;o++){i[o].active=!1}var r=[];t.equippedSkillCodes&&(r=t.equippedSkillCodes.split(",")),this.skillEquiped=[];for(var s=0;s<2;s++){var c=this.convertSkilIndex(r[s]);this.skillEquiped.push(c),this.skillSlot[s].children[c+1].active=!0}},e.prototype.updateSkillCode=function(t){for(var e=t.skillCodes.split(","),n=0;n<e.length;n++){var o=this.convertSkilIndex(e[n]);this.skillEquiped.includes(o)?this.skillStore[o].getComponent(c.default).setSkillEquiped():this.skillStore[o].getComponent(c.default).setSkillAvailible(!0)}},e.prototype.convertSkilIndex=function(t){switch(t){case"FREEZE_ALL":return 0;case"INCR_ATK_50":return 1;case"SLOW_70":return 2;case"INVISIBLE":return 3}return-1},e.prototype.removeSkill=function(t){var e=this;this.isChangingSkill||(this.isChangingSkill=!0,r.API.RemoveSkill(this.convertSkillCode(this.skillStore.indexOf(t)),function(t){t&&(e.UpdateUI(t),e.isChangingSkill=!1)}))},e.prototype.buySkill=function(t){var e=this;this.isChangingSkill||(this.isChangingSkill=!0,r.API.BuySkill(this.convertSkillCode(this.skillStore.indexOf(t)),function(t){t&&(e.UpdateUI(t),e.isChangingSkill=!1)}))},e.prototype.equipSkill=function(t){var e=this;this.isChangingSkill||(this.isChangingSkill=!0,r.API.EquipSkill(this.convertSkillCode(this.skillStore.indexOf(t)),function(t){t&&e.UpdateUI(t),e.isChangingSkill=!1}))},e.prototype.convertSkillCode=function(t){switch(t){case 0:return"FREEZE_ALL";case 1:return"INCR_ATK_50";case 2:return"SLOW_70";case 3:return"INVISIBLE";default:return""}},i([p(cc.Node)],e.prototype,"ButtonBuyStick",void 0),i([p(cc.Node)],e.prototype,"BtnBuyTurn",void 0),i([p(cc.Node)],e.prototype,"SkillContainer",void 0),i([p(cc.Label)],e.prototype,"userScore",void 0),i([p(cc.Label)],e.prototype,"userBestWave",void 0),i([p(cc.Label)],e.prototype,"userBaseHP",void 0),i([p(cc.Label)],e.prototype,"userBaseAtk",void 0),i([p(cc.Label)],e.prototype,"userLevel",void 0),i([p(cc.Label)],e.prototype,"userSticks",void 0),i([p(cc.Label)],e.prototype,"userTurn",void 0),i([p(cc.Label)],e.prototype,"userTotalTurn",void 0),i([p(cc.Node)],e.prototype,"skillSlot",void 0),i([p(cc.Node)],e.prototype,"skillStore",void 0),e=i([u],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../API":"API","../game/Profile":"Profile","./SkillContainer":"SkillContainer"}],Profile:[function(t,e,n){"use strict";cc._RF.push(e,"2b267Zg0CxJwqWGVflUg3IA","Profile");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../API"),s=t("../utils/SingletonNode"),c=cc._decorator,a=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ButtonSound=null,e.volume=1,e.userData={id:0,myid:0,phone:0,balance:0,freeTurn:0,premiumTurn:0,gameId:50,totalTurn:0,currentExp:0,currentStick:0,currentSkill:[1,0],level:0,exp:0,atk:0,hp:0},e}return o(e,t),Object.defineProperty(e.prototype,"UserData",{get:function(){return this.userData},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),r.API.GetInfo(function(t){e.userData=t.result})},e.prototype.GetInfo=function(){var t=this;return r.API.GetInfo(function(e){t.userData=e.result}),this.userData},e.prototype.ReDefineValue=function(){this.userData},e.prototype.start=function(){},e.prototype.playButtonSound=function(){cc.audioEngine.play(this.ButtonSound,!1,this.volume)},e.prototype.setMute=function(){1==this.volume?(this.volume=0,cc.audioEngine.pauseAll()):(this.volume=1,cc.audioEngine.resumeAll())},i([u(cc.AudioClip)],e.prototype,"ButtonSound",void 0),e=i([a],e)}(s.default());n.default=p,cc._RF.pop()},{"../API":"API","../utils/SingletonNode":"SingletonNode"}],ScrollView:[function(t,e,n){"use strict";cc._RF.push(e,"8b02dW4Q5FH87ZRw/q/Xv33","ScrollView");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollview=null,e.slider=null,e}return o(e,t),e.prototype.onRolling=function(){var t=this.scrollview.getScrollOffset().y/this.scrollview.getMaxScrollOffset().y;t=1-t,t=Math.min(1,t),t=Math.max(0,t),this.slider.progress=t},e.prototype.onSliding=function(){this.scrollview.scrollToPercentVertical(this.slider.progress)},i([c(cc.ScrollView)],e.prototype,"scrollview",void 0),i([c(cc.Slider)],e.prototype,"slider",void 0),e=i([s],e)}(cc.Component);n.default=a,cc._RF.pop()},{}],SingletonNode:[function(t,e,n){"use strict";cc._RF.push(e,"005153jN7pCg4dYKrYXehlc","SingletonNode");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"Instance",{get:function(){return this.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){if(e.instance)throw e.instance.constructor.name+" instance already exist";e.instance=this},e}(cc.Component)},cc._RF.pop()},{}],Singleton:[function(t,e,n){"use strict";cc._RF.push(e,"d05d9m5rI9IA7eX1WXQ8VpM","Singleton"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return function(){function t(){if(t.instance)throw t.instance.constructor.name+" instance already exist";t.instance=this}return Object.defineProperty(t,"Instance",{get:function(){return this.instance},enumerable:!1,configurable:!0}),t}()},cc._RF.pop()},{}],SkillContainer:[function(t,e,n){"use strict";cc._RF.push(e,"a5bacXcsmBMvZQ8Sl0NpvnO","SkillContainer");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../game/Profile"),s=t("./PopupStore"),c=cc._decorator,a=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnContainer=null,e.popupParent=null,e.lockIcon=null,e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.btnContainer.children[1].on(cc.Node.EventType.TOUCH_END,function(){return t.removeSkill()}),this.btnContainer.children[2].on(cc.Node.EventType.TOUCH_END,function(){return t.equipSkill()}),this.btnContainer.children[0].on(cc.Node.EventType.TOUCH_END,function(){return t.buySkill()}),this.btnContainer.children[1].on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.btnContainer.children[2].on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.btnContainer.children[0].on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.lockIcon=this.node.children[0].children[0],this.setSkillAvailible(!1)},e.prototype.playBtnSound=function(){r.default.Instance.playButtonSound()},e.prototype.start=function(){},e.prototype.setSkillAvailible=function(t){for(var e=0,n=this.btnContainer.children;e<n.length;e++){var o=n[e];this.lockIcon.active=!1,o.active=!1}t?this.btnContainer.children[2].active=!0:(this.lockIcon.active=!0,this.btnContainer.children[0].active=!0)},e.prototype.setSkillEquiped=function(){for(var t=0,e=this.btnContainer.children;t<e.length;t++){e[t].active=!1}this.btnContainer.children[1].active=!0},e.prototype.removeSkill=function(){this.popupParent.getComponent(s.default).removeSkill(this.node)},e.prototype.buySkill=function(){this.popupParent.getComponent(s.default).buySkill(this.node)},e.prototype.equipSkill=function(){this.popupParent.getComponent(s.default).equipSkill(this.node)},i([u(cc.Node)],e.prototype,"btnContainer",void 0),i([u(cc.Node)],e.prototype,"popupParent",void 0),e=i([a],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../game/Profile":"Profile","./PopupStore":"PopupStore"}],SkillDefine:[function(t,e,n){"use strict";cc._RF.push(e,"3459b7q2DFGw4tpl7Ptk3nC","SkillDefine");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./GameDefine"),s=t("./GameMgr"),c=t("./PlayerSkill"),a=cc._decorator,u=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.DarkCoundown=null,e.isCountDown=!1,e.timer=0,e}return o(e,t),e.prototype.start=function(){this.DarkCoundown.active=!1},e.prototype.useSkill=function(){var t=this;if(!this.isCountDown&&!c.default.Instance.isUsingSkill){var e=s.default.Instance.Player.skillSpriteFrame.indexOf(this.getComponent(cc.Sprite).spriteFrame);c.default.Instance.useSkill(null,e),this.isCountDown=!0,this.timer=r.default.SKILL_TIME_COUNDOWN[e],this.DarkCoundown.active=!0;var n=this.DarkCoundown.position;cc.tween(this.DarkCoundown).by(this.timer,{y:this.node.height}).call(function(){t.isCountDown=!1,t.DarkCoundown.setPosition(n),t.DarkCoundown.active=!1,c.default.Instance.resetKill(e)}).start()}},i([p(cc.Node)],e.prototype,"DarkCoundown",void 0),e=i([u],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./GameDefine":"GameDefine","./GameMgr":"GameMgr","./PlayerSkill":"PlayerSkill"}],StageMgr:[function(t,e,n){"use strict";cc._RF.push(e,"e1caf5/T5hCS5DBKE6D2GUy","StageMgr");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.Stages=void 0;var r,s=t("./Stage"),c=t("../utils/SingletonNode"),a=t("../utils/Helper"),u=cc._decorator,p=u.ccclass,l=u.property;(function(t){t[t.StageInterstitial=0]="StageInterstitial",t[t.StageGame=1]="StageGame"})(r=n.Stages||(n.Stages={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.StagePrefabs=[],e.StageCover=null,e.mPreviousStage=null,e.mCurrentStage=null,e}return o(e,t),Object.defineProperty(e.prototype,"CurrentStage",{get:function(){return this.mCurrentStage},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){t.prototype.onLoad.call(this);for(var e=0;e<this.StagePrefabs.length;e++){var n=cc.instantiate(this.StagePrefabs[e]);this.node.addChild(n),n.active=!1}},e.prototype.start=function(){this.StageCover.active=!1,this.show(r.StageInterstitial)},e.prototype.show=function(t,e){void 0===e&&(e=.5),this.mPreviousStage=this.mCurrentStage;for(var n=0,o=this.node.children;n<o.length;n++){var i=o[n],c=i.name==a.default.GetKeyEnum(r,t);c&&(this.mCurrentStage=i),i.active!=c&&(i.active=c)}this.mPreviousStage&&this.mCurrentStage&&this.mPreviousStage!=this.mCurrentStage?this.animate(e):this.mCurrentStage.getComponent(s.default).init()},e.prototype.nextStage=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=.5);var n=this.node.children.indexOf(this.mCurrentStage);t||0!=n?-1!=n&&(t&&n<this.node.childrenCount-1||!t&&n>0)&&(n=t?n+1:n-1,this.show(a.default.GetIndexEnum(r,this.node.children[n].name),e)):window.location=""},e.prototype.animate=function(t){var e=this;this.mPreviousStage.active=!0,this.mCurrentStage.active=!1,this.StageCover.active=!0,cc.tween(this.mPreviousStage).to(t,{scale:this.mPreviousStage.scaleX},{progress:function(t,n,o,i){return e.StageCover.opacity=255*i,t+(n-t)*i}}).call(function(){e.mPreviousStage.active=!1,e.mCurrentStage.active=!0,e.mCurrentStage.getComponent(s.default).init()}).start(),cc.tween(this.mCurrentStage).delay(t).to(t,{scale:this.mCurrentStage.scaleX},{progress:function(t,n,o,i){return e.StageCover.opacity=255*(1-i),t+(n-t)*i}}).call(function(){e.StageCover.active=!1}).start()},i([l(cc.Prefab)],e.prototype,"StagePrefabs",void 0),e=i([p],e)}(c.default());n.default=h,cc._RF.pop()},{"../utils/Helper":"Helper","../utils/SingletonNode":"SingletonNode","./Stage":"Stage"}],Stage:[function(t,e,n){"use strict";cc._RF.push(e,"8285cHcekVM+LuqNIhGaIT5","Stage");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){},e=i([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],Timer:[function(t,e,n){"use strict";cc._RF.push(e,"2f2fcQ9soJHUbtX80Hsh3jj","Timer"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.timer=0,this.duration=0,this.overhead=0,this.isDone=!0}return t.prototype.SetDuration=function(t){this.timer=t,this.duration=t,this.overhead=0,this.isDone=!1},t.prototype.GetDuration=function(){return this.duration},t.prototype.GetTime=function(){return this.timer},t.prototype.GetPercent=function(){return this.timer/this.duration},t.prototype.Reset=function(){this.timer=this.duration,this.overhead=0,this.isDone=!1},t.prototype.IsDone=function(){return 0===this.timer},t.prototype.FirstFinished=function(){return!(this.timer>0)&&(!this.isDone&&(this.isDone=!0,!0))},t.prototype.GetOverhead=function(){return this.overhead},t.prototype.Update=function(t){0!==this.timer&&(this.timer-=t,this.timer<0&&(this.overhead=-this.timer,this.timer=0))},t}();n.default=o,cc._RF.pop()},{}],UIGame:[function(t,e,n){"use strict";cc._RF.push(e,"1285bwloupNG6Xi08T9eHTl","UIGame");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../game/GameMgr"),s=t("../game/Profile"),c=t("../utils/SingletonNode"),a=cc._decorator,u=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UI_HP=null,e.UI_WAVE=null,e.UI_DAME=null,e.UI_SCORE_TEXT=null,e.UI_METTER=null,e.SkillContainer=null,e.UI_XP=null,e.GiftContainer=null,e.UI_EXP_FILL=null,e.UI_EXP_TEXT=null,e.UI_WHITE_NUMBER_SMALL=[],e.UI_RED_NUMBER_SMALL=[],e.UI_ORGANGE_NUMBER=[],e.UI_RED_NUMBER_BIG=[],e.MuteBtn=null,e}return o(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.start=function(){this.updateMute()},e.prototype.updateHP=function(t,e){var n=this;void 0===t&&(t=1),void 0===e&&(e=!1),e?this.addEffect(this.UI_HP,function(){n.UI_HP.children[0].getComponent(cc.Label).string=": "+t}):this.UI_HP.children[0].getComponent(cc.Label).string=": "+t},e.prototype.updateATK=function(t,e){var n=this;void 0===t&&(t=1),void 0===e&&(e=!1),e?this.addEffect(this.UI_DAME,function(){n.UI_DAME.children[0].getComponent(cc.Label).string=""+t}):this.UI_DAME.children[0].getComponent(cc.Label).string=""+t},e.prototype.setActiveSkillContainer=function(t){this.SkillContainer.active=t},e.prototype.updateWave=function(t,e){var n=this;void 0===t&&(t=1),void 0===e&&(e=!1),e?this.addEffect(this.UI_WAVE,function(){n.UI_WAVE.getComponent(cc.Label).string=""+t}):this.UI_WAVE.getComponent(cc.Label).string=""+t},e.prototype.updateScore=function(t){this.UI_SCORE_TEXT.string=""+t},e.prototype.updateExp=function(t,e){var n=t/e*this.UI_EXP_FILL.width;this.UI_EXP_FILL.x=-this.UI_EXP_FILL.width+n,this.UI_EXP_TEXT.string=""+t},e.prototype.setMute=function(){s.default.Instance.setMute(),r.default.Instance.setVolume()},e.prototype.updateMute=function(){this.MuteBtn.isChecked=0==s.default.Instance.volume},e.prototype.addEffect=function(t,e){cc.tween(t).to(.5,{scale:1.5},{easing:"sineOut"}).call(e).to(.5,{scale:1},{easing:"sineOut"}).start()},i([p(cc.Node)],e.prototype,"UI_HP",void 0),i([p(cc.Node)],e.prototype,"UI_WAVE",void 0),i([p(cc.Node)],e.prototype,"UI_DAME",void 0),i([p(cc.Label)],e.prototype,"UI_SCORE_TEXT",void 0),i([p(cc.Node)],e.prototype,"UI_METTER",void 0),i([p(cc.Node)],e.prototype,"SkillContainer",void 0),i([p(cc.Node)],e.prototype,"UI_XP",void 0),i([p(cc.Node)],e.prototype,"GiftContainer",void 0),i([p(cc.Node)],e.prototype,"UI_EXP_FILL",void 0),i([p(cc.Label)],e.prototype,"UI_EXP_TEXT",void 0),i([p([cc.SpriteFrame])],e.prototype,"UI_WHITE_NUMBER_SMALL",void 0),i([p([cc.SpriteFrame])],e.prototype,"UI_RED_NUMBER_SMALL",void 0),i([p([cc.SpriteFrame])],e.prototype,"UI_ORGANGE_NUMBER",void 0),i([p([cc.SpriteFrame])],e.prototype,"UI_RED_NUMBER_BIG",void 0),i([p(cc.Toggle)],e.prototype,"MuteBtn",void 0),e=i([u],e)}(c.default());n.default=l,cc._RF.pop()},{"../game/GameMgr":"GameMgr","../game/Profile":"Profile","../utils/SingletonNode":"SingletonNode"}],UIManager:[function(t,e,n){"use strict";cc._RF.push(e,"fa273fxqN9NhatJXJRMDiVc","UIManager");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0}),n.UI_SHOW_EFFECT=n.UIs=void 0;var r,s,c=t("../utils/SingletonNode"),a=cc._decorator,u=a.ccclass,p=a.property;(function(t){t[t.UIPreload=0]="UIPreload",t[t.UIGame=1]="UIGame"})(r=n.UIs||(n.UIs={})),function(t){t[t.APPEAR=0]="APPEAR",t[t.SCALE=1]="SCALE",t[t.FADE=2]="FADE"}(s=n.UI_SHOW_EFFECT||(n.UI_SHOW_EFFECT={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UIPrefabs=[],e.mPreviousView=null,e.mCurrentView=null,e}var n;return o(e,t),n=e,e.show=function(t,e,n,o){void 0===e&&(e=s.APPEAR),void 0===n&&(n="smooth"),void 0===o&&(o=.5);var i=this.Instance;i.mPreviousView=i.mCurrentView;for(var c=0,a=i.node.children;c<a.length;c++){var u=a[c],p=u.name==r[t];p&&(i.mCurrentView=u),u.active!=p&&(u.active=p)}i.mPreviousView&&i.mCurrentView&&i.mPreviousView!=i.mCurrentView&&i.animate(e,n,o)},e.getUI=function(t){return this.Instance.node.getChildByName(t)},e.prototype.onLoad=function(){t.prototype.onLoad.call(this);for(var e=0;e<this.UIPrefabs.length;e++){var o=cc.instantiate(this.UIPrefabs[e]);o.active=!1,this.node.addChild(o)}n.show(r.UIPreload)},e.prototype.animate=function(t,e,n){var o=this;switch(this.mPreviousView.active=!0,t){case s.APPEAR:this.mPreviousView.active=!1;break;case s.SCALE:this.mCurrentView.setScale(cc.Vec2.ZERO),cc.tween(this.mPreviousView).to(n,{scale:0},{easing:e}).call(function(){return o.mPreviousView.active=!1}).start(),cc.tween(this.mCurrentView).delay(n).to(n,{scale:1},{easing:e}).start();break;case s.FADE:cc.tween(this.mPreviousView).to(n,{scale:this.mPreviousView.scaleX},{progress:function(t,e,n,i){return o.mPreviousView.opacity=255*(1-i),t+(e-t)*i}}).call(function(){return o.mPreviousView.active=!1}).start(),cc.tween(this.mCurrentView).delay(n).to(n,{scale:this.mCurrentView.scaleX},{progress:function(t,e,n,i){return o.mCurrentView.opacity=255*i,t+(e-t)*i}}).start()}},i([p(cc.Prefab)],e.prototype,"UIPrefabs",void 0),e=n=i([u],e)}(c.default());n.default=l,cc._RF.pop()},{"../utils/SingletonNode":"SingletonNode"}],UIPreload:[function(t,e,n){"use strict";cc._RF.push(e,"a402bVvulBOBr9eMBhvDgLa","UIPreload");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../ui/UIManager"),s=t("../game/GameMgr"),c=t("../popup/PopupManager"),a=t("../utils/SingletonNode"),u=t("../game/Profile"),p=t("../API"),l=cc._decorator,h=l.ccclass,d=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ButtonGiftGuide=null,e.ButtonLeaderboard=null,e.ButtonHistory=null,e.ButtonCollection=null,e.BtnStore=null,e.Playbtn=null,e.spider=null,e.bird=null,e.Cloud=null,e.userScore=null,e.userBestWave=null,e.userBaseHP=null,e.userBaseAtk=null,e.userLevel=null,e.userTurn=null,e.userTotalTurn=null,e.bgLoop=null,e.SoundPlayButton=null,e.audioIDBgLoop=0,e.isGameStarted=!1,e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.ButtonGiftGuide.on(cc.Node.EventType.TOUCH_END,function(){return c.default.Instance.ShowOtherScreen(null,"gg")}),this.ButtonLeaderboard.on(cc.Node.EventType.TOUCH_END,function(){return c.default.Instance.ShowOtherScreen(null,"leaderBoard")}),this.ButtonHistory.on(cc.Node.EventType.TOUCH_END,function(){return c.default.Instance.ShowOtherScreen(null,"history")}),this.ButtonCollection.on(cc.Node.EventType.TOUCH_END,function(){return c.default.Instance.ShowOtherScreen(null,"collection")}),this.BtnStore.on(cc.Node.EventType.TOUCH_END,function(){return c.default.Instance.ShowOtherScreen(null,"store")}),this.Playbtn.on(cc.Node.EventType.TOUCH_END,function(){return t.startGame()}),this.ButtonGiftGuide.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.ButtonLeaderboard.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.ButtonHistory.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.ButtonCollection.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.BtnStore.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()}),this.Playbtn.on(cc.Node.EventType.TOUCH_START,function(){return t.playBtnSound()})},e.prototype.playBtnSound=function(){u.default.Instance.playButtonSound()},e.prototype.start=function(){var t=this;this.setAction(),p.API.GetInfo(function(e){t.updateLevel(e.result),t.updateTurn(e.result)})},e.prototype.startGame=function(){cc.audioEngine.stop(this.audioIDBgLoop),r.default.show(r.UIs.UIGame,r.UI_SHOW_EFFECT.FADE),c.default.Instance.isShowingPopup||this.isGameStarted||(this.isGameStarted=!0,cc.find("Canvas").getChildByName("Ingame").active=!0,s.default.Instance.EnterGame())},e.prototype.setMute=function(){u.default.Instance.setMute()},e.prototype.setAction=function(){var t=this;this.audioIDBgLoop=cc.audioEngine.play(this.bgLoop,!0,u.default.Instance.volume),cc.tween(this.spider).repeatForever(cc.tween().by(.5,{y:-200},{easing:"quadIn"}).delay(3).by(.5,{y:200},{easing:"quadIn"}).delay(1)).start(),setTimeout(function(){cc.tween(t.bird).by(2,{position:new cc.Vec3(-400,-300)},{easing:"quadIn"}).start()},200),cc.tween(this.Cloud).repeatForever(cc.tween().by(12,{x:100}).by(24,{x:-200})).start()},e.prototype.updateLevel=function(t){this.userScore.string=t.highScore,this.userBestWave.string=t.highWave,this.userBaseHP.string=t.hp,this.userBaseAtk.string=t.atk,this.userLevel.string=t.level},e.prototype.updateTurn=function(t){this.userTurn.string=t.freeTurn+"/"+t.freeTurn,this.userTotalTurn.string=t.freeTurn},i([d(cc.Node)],e.prototype,"ButtonGiftGuide",void 0),i([d(cc.Node)],e.prototype,"ButtonLeaderboard",void 0),i([d(cc.Node)],e.prototype,"ButtonHistory",void 0),i([d(cc.Node)],e.prototype,"ButtonCollection",void 0),i([d(cc.Node)],e.prototype,"BtnStore",void 0),i([d(cc.Node)],e.prototype,"Playbtn",void 0),i([d(cc.Node)],e.prototype,"spider",void 0),i([d(cc.Node)],e.prototype,"bird",void 0),i([d(cc.Node)],e.prototype,"Cloud",void 0),i([d(cc.Label)],e.prototype,"userScore",void 0),i([d(cc.Label)],e.prototype,"userBestWave",void 0),i([d(cc.Label)],e.prototype,"userBaseHP",void 0),i([d(cc.Label)],e.prototype,"userBaseAtk",void 0),i([d(cc.Label)],e.prototype,"userLevel",void 0),i([d(cc.Label)],e.prototype,"userTurn",void 0),i([d(cc.Label)],e.prototype,"userTotalTurn",void 0),i([d(cc.AudioClip)],e.prototype,"bgLoop",void 0),i([d(cc.AudioClip)],e.prototype,"SoundPlayButton",void 0),e=i([h],e)}(a.default());n.default=f,cc._RF.pop()},{"../API":"API","../game/GameMgr":"GameMgr","../game/Profile":"Profile","../popup/PopupManager":"PopupManager","../ui/UIManager":"UIManager","../utils/SingletonNode":"SingletonNode"}],VoiceInput:[function(t,e,n){"use strict";cc._RF.push(e,"3ccac1X+jREDob6WX8kIUEN","VoiceInput");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=t("../lib/volume-meter"),r=t("../utils/Singleton"),s=t("./GameDefine"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioContext=null,e.mediaStreamSource=null,e.meter=null,e.gotMicPermission=!1,e.warningMsg="",e}return o(e,t),e.prototype.GetMicPermission=function(t){var e=this;void 0===t&&(t=null),void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(t){var e=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return e?new Promise(function(n,o){e.call(navigator,t,n,o)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))});try{navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(n){e.OnGetStreamSuccess(n,t)}).catch(function(n){e.OnGetStreamFail(n),t&&t(!1)})}catch(e){this.OnGetStreamFail(e),t&&t(!1)}},e.prototype.GetVolume=function(){if(!this.GotMicPermission())return 0;var t=this.meter.volume*s.default.VOLUME_VOICE_INPUT_AMPLIFIER;return t=Math.min(1,t)},e.prototype.GotMicPermission=function(){return this.gotMicPermission},e.prototype.GetWarningMessage=function(){return this.warningMsg},e.prototype.OnGetStreamSuccess=function(t,e){var n=this;try{var o=window.AudioContext||window.webkitAudioContext;this.gotMicPermission=!0,this.audioContext=new o,this.mediaStreamSource=this.audioContext.createMediaStreamSource(t),this.meter=i.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter),this.audioContext&&this.audioContext.resume();var r=!1,s=setInterval(function(){n.GetVolume()>0&&(r=!0,clearInterval(s),e&&e(!0))},1e3/60);setTimeout(function(){r||(clearInterval(s),e&&e(!1))},2e3)}catch(t){this.warningMsg="Fail create audio meter "+t,e&&e(!1)}},e.prototype.OnGetStreamFail=function(t){this.warningMsg="Fail getting user media "+t},e}(r.default());n.default=c,cc._RF.pop()},{"../lib/volume-meter":"volume-meter","../utils/Singleton":"Singleton","./GameDefine":"GameDefine"}],WaveDefine:[function(t,e,n){"use strict";cc._RF.push(e,"af276Z1sTVIe7DrZP78ZF8m","WaveDefine");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.start=function(){},e.prototype.update=function(t){0==this.node.children.length&&this.node.destroy()},e=i([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],"copy-to-clipboard":[function(t,e,n){(function(o){"use strict";cc._RF.push(e,"46d62f7lmxLtYrCe6tYpBfJ","copy-to-clipboard"),function(t){"object"==typeof n&&void 0!==e?e.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:void 0!==o?o:"undefined"!=typeof self?self:this).copyToClipboard=t()}(function(){return function e(n,o,i){function r(c,a){if(!o[c]){if(!n[c]){var u="function"==typeof t&&t;if(!a&&u)return u(c,!0);if(s)return s(c,!0);var p=new Error("Cannot find module '"+c+"'");throw p.code="MODULE_NOT_FOUND",p}var l=o[c]={exports:{}};n[c][0].call(l.exports,function(t){return r(n[c][1][t]||t)},l,l.exports,e,n,o,i)}return o[c].exports}for(var s="function"==typeof t&&t,c=0;c<i.length;c++)r(i[c]);return r}({1:[function(t,e,n){var o=t("toggle-selection");e.exports=function(t,e){var n,i,r,s,c,a,u=!1;e||(e={}),n=e.debug||!1;try{if(r=o(),s=document.createRange(),c=document.getSelection(),(a=document.createElement("span")).textContent=t,a.style.all="unset",a.style.position="fixed",a.style.top=0,a.style.clip="rect(0, 0, 0, 0)",a.style.whiteSpace="pre",a.style.webkitUserSelect="text",a.style.MozUserSelect="text",a.style.msUserSelect="text",a.style.userSelect="text",document.body.appendChild(a),s.selectNode(a),c.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(o){n&&console.error("unable to copy using execCommand: ",o),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",t),u=!0}catch(o){n&&console.error("unable to copy using clipboardData: ",o),n&&console.error("falling back to prompt"),i=function(t){var e=(/mac os x/i.test(navigator.userAgent)?"\xe2\u0152\u02dc":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}("message"in e?e.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,t)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(s):c.removeAllRanges()),a&&document.body.removeChild(a),r()}return u}},{"toggle-selection":2}],2:[function(t,e,n){e.exports=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],o=0;o<t.rangeCount;o++)n.push(t.getRangeAt(o));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||n.forEach(function(e){t.addRange(e)}),e&&e.focus()}}},{}]},{},[1])(1)}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],shake:[function(t,e,n){"use strict";cc._RF.push(e,"791d3Rs4ktE+7iJ1Q43NtGZ","shake"),function(t,n){"function"==typeof define&&define.amd?define(function(){return n(t,t.document)}):void 0!==e&&e.exports?e.exports=n(t,t.document):t.Shake=n(t,t.document)}("undefined"!=typeof window?window:void 0,function(t,e){function n(n){if(this.hasDeviceMotion="ondevicemotion"in t||"deviceorientation"in t,this.options={threshold:15,timeout:1e3},"object"==typeof n)for(var o in n)n.hasOwnProperty(o)&&(this.options[o]=n[o]);if(this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null,"function"==typeof e.CustomEvent)this.event=new e.CustomEvent("shake",{bubbles:!0,cancelable:!0});else{if("function"!=typeof e.createEvent)return!1;this.event=e.createEvent("Event"),this.event.initEvent("shake",!0,!0)}}return n.prototype.reset=function(){this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null},n.prototype.start=function(){this.reset(),t.DeviceOrientationEvent?t.addEventListener("deviceorientation",this,!1):t.DeviceMotionEvent?t.addEventListener("devicemotion",this,!1):t.addEventListener("MozOrientation",this,!1)},n.prototype.stop=function(){t.DeviceOrientationEvent?t.removeEventListener("deviceorientation",this,!1):t.DeviceMotionEvent?t.removeEventListener("devicemotion",this,!1):t.removeEventListener("MozOrientation",this,!1),this.reset()},n.prototype.deviceorientation=function(e){var n,o,i,r=e;if(null===this.lastX&&null===this.lastY&&null===this.lastZ)return this.lastX=2*r.gamma,this.lastY=2*r.beta,void(this.lastZ=2*r.alpha);n=Math.abs(this.lastX-2*r.gamma),o=Math.abs(this.lastY-2*r.beta),i=Math.abs(this.lastZ-2*r.alpha),(n>this.options.threshold&&o>this.options.threshold||n>this.options.threshold&&i>this.options.threshold||o>this.options.threshold&&i>this.options.threshold)&&(new Date).getTime()-this.lastTime.getTime()>this.options.timeout&&(t.dispatchEvent(this.event),this.lastTime=new Date),this.lastX=2*r.gamma,this.lastY=2*r.beta,this.lastZ=2*r.alpha},n.prototype.devicemotion=function(e){var n,o,i,r=e.accelerationIncludingGravity;if(null===this.lastX&&null===this.lastY&&null===this.lastZ)return this.lastX=1*r.z,this.lastY=1*r.y,void(this.lastZ=1*r.x);n=Math.abs(this.lastX-1*r.z),o=Math.abs(this.lastY-1*r.y),i=Math.abs(this.lastZ-1*r.x),(n>this.options.threshold&&o>this.options.threshold||n>this.options.threshold&&i>this.options.threshold||o>this.options.threshold&&i>this.options.threshold)&&(new Date).getTime()-this.lastTime.getTime()>this.options.timeout&&(t.dispatchEvent(this.event),this.lastTime=new Date),this.lastX=1*r.z,this.lastY=1*r.y,this.lastZ=1*r.x},n.prototype.handleEvent=function(t){if("function"==typeof this[t.type])return this[t.type](t)},n}),cc._RF.pop()},{}],strings:[function(t,e,n){"use strict";cc._RF.push(e,"4664dFv6bRGo4sCIdLzZs7d","strings"),e.exports={EMPTY:{EN:"",MY:"",MU:""},COMMON_HIGHSCORE:{EN:"High Score:",MY:"High Score:",MU:"High Score:"},COMMON_STORE_EQUIP:{EN:"Store &\nEquipment",MY:"Store &\nEquipment",MU:"Store & Equipment"},COMMON_GIFT_GUIDE:{EN:"Gift & Guide",MY:"Gift & Guide",MU:"Gift & Guide"},COMMON_LEADERBOARD:{EN:"Leader board",MY:"Leader board",MU:"Leader board"},COMMON_HISTORY:{EN:"Your History",MY:"Your History",MU:"Your History"},COMMON_COLLECTION:{EN:"Your Collection",MY:"Your Collection",MU:"Your Collection"},COMMON_SCORE:{EN:"Score:",MY:"Score:",MU:"Score:"},COMMON_SKILL:{EN:"Skill",MY:"Skill",MU:"Skill"},COMMON_ATTACK:{EN:"Attack",MY:"Attack",MU:"Attack"},COMMON_COOLDOWN:{EN:"Cool down:",MY:"Cool down:",MU:"Cool down:"},COMMON_XP:{EN:"XP",MY:"XP",MU:"XP"},COMMON_LV:{EN:"LV.",MY:"LV.",MU:"LV."},COMMON_LEVEL_UP:{EN:"Level up!!!",MY:"Level up!!!",MU:"Level up!!!"},COMMON_EQUIP:{EN:"EQUIP NOW",MY:"EQUIP NOW",MU:"EQUIP NOW"},COMMON_UNEQUIP:{EN:"UNEQUIP",MY:"UNEQUIP",MU:"UNEQUIP"},COMMON_YES:{EN:"Yes",MY:"Yes",MU:"Yes"},COMMON_NO:{EN:"No",MY:"No",MU:"No"},COMMON_OK:{EN:"OK",MY:"OK",MU:"OK"},COMMON_COPY:{EN:"Copy",MY:"Copy",MU:"Copy"},COMMON_TURN_REMAIN:{EN:"Daily remaining turns:",MY:"Daily remaining turns:",MU:"Daily remaining turns:"},COMMON_TURN_TOTAL:{EN:"Total turns:",MY:"Total turns:",MU:"Total turns:"},COMMON_YOUR_STICK:{EN:"Your Sticks:",MY:"Your Sticks:",MU:"Your Sticks:"},COMMON_NO_OF:{EN:"No.",MY:"No.",MU:"No."},COMMON_DATE_TIME:{EN:"Date / Time",MY:"Date / Time",MU:"Date / Time"},PLAYER_ID:{EN:"Your ID:",MY:"Your ID:",MU:"Your ID:"},PLAYER_STAR:{EN:"Collected Stars",MY:"Collected Stars",MU:"Collected Stars"},PLAYER_RANK:{EN:"Current Rank:",MY:"Current Rank:",MU:"Current Rank:"},BOOSTER_TITLE:{EN:"Booster pack",MY:"Booster pack",MU:"Booster pack"},BOOSTER_TITLE_2:{EN:"Buy sticks",MY:"Buy sticks",MU:"Buy sticks"},BOOSTER_DESC:{EN:"For this turn only",MY:"For this turn only",MU:"For this turn only"},BOOSTER_HP:{EN:"Max HP",MY:"Max HP",MU:"Max HP"},BOOSTER_CONFIRM:{EN:"Spend 1000 Ks main lalance\nto buy 1000 Sticks?",MY:"Spend 1000 Ks main lalance\nto buy 1000 Sticks?",MU:"Spend 1000 Ks main lalance\nto buy 1000 Sticks?"},STORE_DESC:{EN:"Buy and equip skills for special powers",MY:"Buy and equip skills for special powers",MU:"Buy and equip skills for special powers"},STORE_BUY_WITH:{EN:"Buy with 1000",MY:"Buy with 1000",MU:"Buy with 1000"},STORE_TURN_1:{EN:"Get 30 turns",MY:"Get 30 turns",MU:"Get 30 turns"},STORE_TURN_2:{EN:"Not affect daily limit",MY:"Not affect daily limit",MU:"Not affect daily limit"},STORE_FREEZE:{EN:"Freeze all\nenemies for 2s",MY:"Freeze all\nenemies for 2s",MU:"Freeze all\nenemies for 2s"},STORE_SLOW:{EN:"Slow enemies\n70% for 5s",MY:"Slow enemies\n70% for 5s",MU:"Slow enemies\n70% for 5s"},STORE_ATTACK:{EN:"+50% Attack\nfor 5s",MY:"+50% Attack\nfor 5s",MU:"+50% Attack\nfor 5s"},STORE_INVISIBLE:{EN:"Be invisible\nfor 5s",MY:"Be invisible\nfor 5s",MU:"Be invisible\nfor 5s"},COLLECTION_DESC_1:{EN:"Collect all 10 sims to win",MY:"Collect all 10 sims to win",MU:"Collect all 10 sims to win"},COLLECTION_DESC_2:{EN:"iPhone 12",MY:"iPhone 12",MU:"iPhone 12"},COLLECTION_DESC_3:{EN:"as Grand Prize.",MY:"as Grand Prize.",MU:"as Grand Prize."},COLLECTION_DESC_4:{EN:"Play more to get more chance",MY:"Play more to get more chance",MU:"Play more to get more chance"},COLLECTION_DESC_5:{EN:"to win these amazing prizes!",MY:"to win these amazing prizes!",MU:"to win these amazing prizes!"},COLLECTION_DESC_6:{EN:"to win more prizes!",MY:"to win more prizes!",MU:"to win more prizes!"},COLLECTION_DESC_7:{EN:"Check your grand prize collection progress!",MY:"Check your grand prize collection progress!",MU:"Check your grand prize collection progress!"},COLLECTION_TARGET:{EN:"Your Target",MY:"Your Target",MU:"Your Target"},LB_DESC:{EN:"See how you compete with other players!",MY:"See how you compete with other players!",MU:"See how you compete with other players!"},LB_STAR_TITLE:{EN:"TOP STAR",MY:"TOP STAR",MU:"TOP STAR"},LB_STAR_DESC:{EN:"Top 10 weekly star collectors will receive 10,000Ks Emoney each",MY:"Top 10 weekly star collectors will receive 10,000Ks Emoney each",MU:"Top 10 weekly star collectors will receive 10,000Ks Emoney each"},LB_STAR_TIME:{EN:"Star Time",MY:"Star Time",MU:"Star Time"},LB_STARS:{EN:"Stars",MY:"Stars",MU:"Stars"},LB_SCORE_TITLE:{EN:"TOP SCORE",MY:"TOP SCORE",MU:"TOP SCORE"},LB_SCORE_TIMES:{EN:"Score time",MY:"Score time",MU:"Score time"},LB_SCORES:{EN:"Score",MY:"Score",MU:"Score"},LB_WINNER_TITLE:{EN:"WINNER LIST",MY:"WINNER LIST",MU:"WINNER LIST"},LB_WINNER_GRAND:{EN:"Grand Prizes",MY:"Grand Prizes",MU:"Grand Prizes"},LB_WINNER_PREMIUM:{EN:"Premium Prizes",MY:"Premium Prizes",MU:"Premium Prizes"},LB_THIS_WEEK:{EN:"This Week",MY:"This Week",MU:"This Week"},LB_LAST_WEEK:{EN:"Last Week",MY:"Last Week",MU:"Last Week"},LB_PERIOD:{EN:"Period:",MY:"Period:",MU:"Period:"},GG_GIFT:{EN:"GIFTS",MY:"GIFTS",MU:"GIFTS"},GG_GIFT_SPECIAL:{EN:"SPECIAL PRIZES",MY:"SPECIAL PRIZES",MU:"SPECIAL PRIZES"},GG_GUIDE:{EN:"GUIDE",MY:"GUIDE",MU:"GUIDE"},GG_GUIDE_01:{EN:"How to play game?",MY:"How to play game?",MU:"How to play game?"},GG_GUIDE_02:{EN:"How to view history?",MY:"How to view history?",MU:"How to view history?"},GG_GUIDE_03:{EN:"How to redeem gifts?",MY:"How to redeem gifts?",MU:"How to redeem gifts?"},GG_GUIDE_04:{EN:"How to to up sticks?",MY:"How to to up sticks?",MU:"How to to up sticks?"},HISTORY_DESC_1:{EN:"Get more turns after buying\npakage/topup or buy at the Store!",MY:"Get more turns after buying\npakage/topup or buy at the Store!",MU:"Get more turns after buying\npakage/topup or buy at the Store!"},HISTORY_DESC_2:{EN:"Tap for details!",MY:"Tap for details!",MU:"Tap for details!"},HISTORY_DESC_3:{EN:"Check your received turns & prizes here!",MY:"Check your received turns & prizes here!",MU:"Check your received turns & prizes here!"},HISTORY_TURN:{EN:"TURN",MY:"TURN",MU:"TURN"},HISTORY_TURNS:{EN:"Turn",MY:"Turn",MU:"Turn"},HISTORY_PRIZE:{EN:"PRIZE",MY:"PRIZE",MU:"PRIZE"},HISTORY_GIFT:{EN:"Received Gifts",MY:"Received Gifts",MU:"Received Gifts"},HISTORY_LUCKY_CODE:{EN:"Lucky Code",MY:"Lucky Code",MU:"Lucky Code"},HISTORY_LUCKY_CODE_DESC:{EN:"Lucky Codes will be selected\nduring livestreams to win 20,000,000Ks",MY:"Lucky Codes will be selected\nduring livestreams to win 20,000,000Ks",MU:"Lucky Codes will be selected\nduring livestreams to win 20,000,000Ks"},HISTORY_GIFT_CODE:{EN:"Emoney Gift Code",MY:"Emoney Gift Code",MU:"Emoney Gift Code"},HISTORY_GIFT_CODE_DESC_1:{EN:"Input Gift Code to claim\nyour emoney prize.",MY:"Input Gift Code to claim\nyour emoney prize.",MU:"Input Gift Code to claim\nyour emoney prize."},HISTORY_GIFT_CODE_DESC_2:{EN:"Tap me to get MytelPay application!",MY:"Tap me to get MytelPay application!",MU:"Tap me to get MytelPay application!"},HISTORY_GIFT_CODE_DESC_3:{EN:"Gift code can be used one time only. You can claim\non MytelPay app and please do not share to anyone",MY:"Gift code can be used one time only. You can claim\non MytelPay app and please do not share to anyone",MU:"Gift code can be used one time only. You can claim\non MytelPay app and please do not share to anyone"},END_GAMEOVER:{EN:"Game Over",MY:"Game Over",MU:"Game Over"},END_BEST_SCORE:{EN:"BEST\nSCORE",MY:"BEST\nSCORE",MU:"BEST\nSCORE"},END_REPLAY:{EN:"PLAY AGAIN",MY:"PLAY AGAIN",MU:"PLAY AGAIN"},END_PRIZE:{EN:"YOU WON THESE AMAZING PRIZES",MY:"YOU WON THESE AMAZING PRIZES",MU:"YOU WON THESE AMAZING PRIZES"},TUTOR_TITLE:{EN:"How to play in 3 steps",MY:"How to play in 3 steps",MU:"How to play in 3 steps"},TUTOR_DESC_1:{EN:"Keep MoMo running as \nfar as possible",MY:"Keep MoMo running as \nfar as possible",MU:"Keep MoMo running as \nfar as possible"},TUTOR_DESC_2:{EN:"Swipe to kill enemies",MY:"Swipe to kill enemies",MU:"Swipe to kill enemies"},TUTOR_DESC_3:{EN:"Jump over water!",MY:"Jump over water!",MU:"Jump over water!"},GAME_MODE:{EN:"CHOOSE GAME MODE",MY:"CHOOSE GAME MODE",MU:"CHOOSE GAME MODE"},GAME_MODE_VOICE:{EN:"Use voice",MY:"Use voice",MU:"Use voice"},GAME_MODE_VOICE_DESC_1:{EN:"SCREAM\n2 JUMP",MY:"SCREAM\n2 JUMP",MU:"SCREAM\n2 JUMP"},GAME_MODE_VOICE_DESC_2:{EN:"To play with voice input, you need to:",MY:"To play with voice input, you need to:",MU:"To play with voice input, you need to:"},GAME_MODE_VOICE_DESC_3:{EN:"1. Enable MyID to access microphone.",MY:"1. Enable MyID to access microphone.",MU:"1. Enable MyID to access microphone."},GAME_MODE_HAND:{EN:"Use hand",MY:"Use hand",MU:"Use hand"},GAME_MODE_HAND_DESC:{EN:"SHAKE\n2 JUMP",MY:"SHAKE\n2 JUMP",MU:"SHAKE\n2 JUMP"},WARNING_VOICE_1:{EN:"VOICE INPUT\nNOT DETECTED",MY:"VOICE INPUT\nNOT DETECTED",MU:"VOICE INPUT\nNOT DETECTED"},WARNING_VOICE_2:{EN:"PLEASE CHOOSE",MY:"PLEASE CHOOSE",MU:"PLEASE CHOOSE"},WARNING_VOICE_3:{EN:"\u201cSHAKE 2 JUMP MODE\u201d",MY:"\u201cSHAKE 2 JUMP MODE\u201d",MU:"\u201cSHAKE 2 JUMP MODE\u201d"},GAME_GO:{EN:"GO!",MY:"GO!",MU:"GO!"},GAME_WAVE:{EN:"Wave",MY:"Wave",MU:"Wave"},GAME_ENEMY_NOTICE:{EN:"Enemies incoming in",MY:"Enemies incoming in",MU:"Enemies incoming in"},GAME_WATER_NOTICE:{EN:"Water incoming in",MY:"Water incoming in",MU:"Water incoming in"},GAME_REVIVE_TITLE:{EN:"Oops\u2026 Revive now?",MY:"Oops\u2026 Revive now?",MU:"Oops\u2026 Revive now?"},GAME_REVIVE_DESC:{EN:"Get full health and move to next wave",MY:"Get full health and move to next wave",MU:"Get full health and move to next wave"},"GG_GRAND PRIZE":{EN:"GRAND PRIZE",MY:"GRAND PRIZE",MU:"GRAND PRIZE"},"GG_PREMIUM PRIZE":{EN:"PREMIUM PRIZES",MY:"PREMIUM PRIZES",MU:"PREMIUM PRIZES"},ENEMY_COMMING_TUT:{EN:"SWIPE TO\nKILL ENEMIES",MY:"SWIPE TO\nKILL ENEMIES",MU:"SWIPE TO\nKILL ENEMIES"},TUTOR_DESC_3_IOS:{EN:"Shake to jump\nover water!",MY:"Shake to jump\nover water!",MU:"Shake to jump\nover water!"},GAME_MODE_VOICE_DESC_4:{EN:'2. Tap "ALLOW" whenever you play Speak 2 Jump',MY:'2. Tap "ALLOW" whenever you play Speak 2 Jump',MU:'2. Tap "ALLOW" whenever you play Speak 2 Jump'},STORE_BUY_WITH_500:{EN:"Buy with 500",MY:"Buy with 500",MU:"Buy with 500"},HISTORY_GIFT_CODE_DESC_4:{EN:"Tap me to to Follow Mytel fanpage!",MY:"Tap me to to Follow Mytel fanpage!",MU:"Tap me to to Follow Mytel fanpage!"},LB_WINNER_TITLE_2:{EN:"Collect all 10 sims to win 20,000,000 Kyats",MY:"Collect all 10 sims to win 20,000,000 Kyats",MU:"Collect all 10 sims to win 20,000,000 Kyats"}},cc._RF.pop()},{}],"volume-meter":[function(t,e,n){"use strict";function o(t){for(var e,n=t.inputBuffer.getChannelData(0),o=n.length,i=0,r=0;r<o;r++)e=n[r],Math.abs(e)>=this.clipLevel&&(this.clipping=!0,this.lastClip=window.performance.now()),i+=e*e;var s=Math.sqrt(i/o);this.volume=Math.max(s,this.volume*this.averaging)}cc._RF.push(e,"ad54dBNHAVOCLKMrpeYb4+r","volume-meter"),n.__esModule=!0,n.createAudioMeter=function(t,e,n,i){var r=t.createScriptProcessor(512);return r.onaudioprocess=o,r.clipping=!1,r.lastClip=0,r.volume=0,r.clipLevel=e||.98,r.averaging=n||.95,r.clipLag=i||750,r.connect(t.destination),r.checkClipping=function(){return!!this.clipping&&(this.lastClip+this.clipLag<window.performance.now()&&(this.clipping=!1),this.clipping)},r.shutdown=function(){this.disconnect(),this.onaudioprocess=null},r},cc._RF.pop()},{}]},{},["API","Loader","Events","Global","Localization","AudioManager","BGLoop","BackgroundFade","Bg","BigBg","Decoration","Effect","Enemy","EnemyDefine","EnemyMgr","Enviroment","EnviromentManager","GameDefine","GameMgr","Ground","Item","LevelMgr","MiddleGround","Outline","Player","PlayerSkill","Profile","ScrollView","SkillDefine","VoiceInput","WaveDefine","shake","HistoryEmoney","HistoryLuckyCode","HistoryTurn","LBPreniumPrize","LBStar","LBWinnerPrize","copy-to-clipboard","volume-meter","PopupBoosterPack","PopupBuyStick","PopupCollection","PopupEngame","PopupHistory","PopupHowToPlayAndroid","PopupLeaderBoard","PopupManager","PopupRevive","PopupStore","SkillContainer","Stage","StageMgr","UIGame","UIManager","UIPreload","ButtonClosePopup","GameObject","Helper","LocalizedFrame","LocalizedText","ObjectMgr","Singleton","SingletonNode","Timer","strings"]);