<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">

  <title>Running Momo</title>

  <!--http://www.html5rocks.com/en/mobile/mobifying/-->
  <meta name="viewport"
    content="width=device-width,user-scalable=no,initial-scale=1, minimum-scale=1,maximum-scale=1" />

  <!--https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="format-detection" content="telephone=no">

  <!-- force webkit on 360 -->
  <meta name="renderer" content="webkit" />
  <meta name="force-rendering" content="webkit" />
  <!-- force edge on IE -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="msapplication-tap-highlight" content="no">

  <!-- force full screen on some browser -->
  <meta name="full-screen" content="yes" />
  <meta name="x5-fullscreen" content="true" />
  <meta name="360-fullscreen" content="true" />

  <!-- force screen orientation on some browser -->
  <meta name="screen-orientation" content="" />
  <meta name="x5-orientation" content="">

  <!--fix fireball/issues/3568 -->
  <!--<meta name="browsermode" content="application">-->
  <meta name="x5-page-mode" content="app">

  <!--<link rel="apple-touch-icon" href=".png" />-->
  <!--<link rel="apple-touch-icon-precomposed" href=".png" />-->

  <link rel="stylesheet" type="text/css" href="style-mobile.86a13.css" />
  <link rel="icon" href="icon.58d99.ico" />
  <script>
    window.DEBUG_API = true;
    window.service_host = "wss://mytel.elofun.net";
    window.token = "96a3d1ced3d1d3d0ced2d3d9d8d8a4b1dfdce1dfe1dedce0e1e7e6e612c25f72b6b7bd2a1f3406252006232a112c0e181b4111fa18341540173d220635161d3c254019422d4740322748574a431550502f50291f332e36583b3332673f4a583f5a4f60674e434a70573042705633787a54725e8058765a5964548746674545826d5c6d4c747072617374765671788f596f9558578fa4769e92769b9a819c7d66858b81b0888f8d728d9271aa9bb092b2929b997e998fb3c19d939184aca684cfa49bad8ba89fbf8fb7c9a9dabcb7b9ceb2aab2d5cfb3add6bdd9b5a3bfedbdedc3f1c1f2c7e5cdf0c7ecb5eadceccdbbd3cafff2ebe2d2bdd7f9ff09e0fdd50de311fb13e9dfe5cdeae2ea1105d6f10ef510f2180ef3fe2411291f27fee520200224e9ee1e0212300a2c0e372416f939281a01312e231e3c1a021a3d2b2a4c49395011433b320c462a222a49463a354e35503251431d3a63524625213b5c6b5e592a4e6243656b664b56566e5c474d7f54745d7d575f52755c8840415f8d6145626b834c748587916c6679987c7a7558747e7e9183a582977798a79a967ba0ac7fa1a7a28ba892a5a1ac96ba8bacbbae9f9fb8c093b5bbb6a78292c59eaaa2c8b7aeaecebe9ea5d0a7cca692c6aacccbcaaed4ddc4beb5a3bbb2e7dad5a5caefd9a9e4efdce7b5f7e2c6c6b1dcd6cdbbcff1cef3d7e2d1c1e8e3e1c3dee7ed0de304dd0de8dfedd0f8e2d10af1eaf91ff2fef9de040205260703181b0b2d01e60430012c03280227212809f70b2d092e120a12312c1244433201263c1e2a0d4e372e3c493c4929462d4b534a432b3615492f351f366424653b32246a3f37396a444a2c71473f41334d534d364f7c4d784f7470396e534d435a8848895f56488e635b5d8e676f61516a89795771676559736a719c7398945d927772ab819c6cab8f8e86a39c6e92b2a28275b5a79b96b1a88a7db3ac7d7cc2b0a680baaaa6cbbeb9c4aec1bca28dc3b7b6aecbbcbbb2dfafd1d8a0b3d9b6e3d0b6c6ebbbdde4d7bfe4b1e6d4e8f4ede0ecd6e7dbdad2efe0dfd603d3f403f6f2e6c1f9eac5dac6fade000ffd0808d3f7f7f21104d5d80efeffd81cf319f61911e1e9e2152002210ee9fe2313ed1237213809f7273c0e2d1ff9163f2e2201fd173940081b411e4b381e2e5323454c3f274c114944502a53403a1951431d3a63524625213b5c6b5e584e3e6e535260694a56466b5b353d366875597d6c5278826f425d7a5e565e47776e6e4c66735e9680517a91846a798e7e7f5962766e76a7876169a88c867d6b7fa57ab29c6d96ada08695a89c9a75ada79ebfb2968e96b9b0a696c1b4998d87b0afa2c9b4c8c8c9b8a2a997bcd0aad8c999bddcb3d9aee6c8c6caddd5e1bee1d0bdb1aaddadd2f6e0ecc6f5dcd6cdbbcff1c9bed8f5ef07dbd3dd0be1d7edc6df000f02fbf2ed06ed08e919fcfafe10f311f5db04fedc25fb06f5e4fe07052f0331092d090f202a0d12f0f11c2d0631200b2bfa242212371c261d3a3824022d2f092e3839404151342b2826285327511e1a4e3860536060355d5a433362496c606445485d444d323757306c45643c4956514f405a84447e7b798062427f4c87627c635d8f686c935596659679998f9f9a6e825a8e6f9e759286617dab9e93809ca37f899dad8b878ba1ab95868ab5bc8796c28fb48fb3b895a0aaa0aa86cdc5b0888cd0ce91abc1c9c698c8b6d0acd098d2b8d9a3d0d3d0b2c8d4bcddb7e8d6edcee9e3edf2d1aeaff9f2c9f8ebe8fbee00f4dbde02fed9bbf8d8dbfec7cbcb050eea0810e80b09130313d216d81dd6eddff2eff8e216f4f529e803e3fdf6fe1ee71032120a103607231f2e2b3c23091935faf9f73931021639401f284b1b482b2a1c4f4a2b132e2d362c364453311e1e5f5a4a2b3321333e445c635f55442b5e2d484e684b55496a4a4a683b796554555a3c62757c3c7772546542895d486c49884d4f7c6a7d72968381706c65747c718b585e9182.bd763b12586c2f63d8bd8fe414bded94f2e473503f3ffdce0c236996ce5c634333628aaaee19739f4850af6d32084ceb449ec25e0d082ce144a49ef76bf81fd0";
  </script>
  <script src="https://mytel.elofun.net/services/gateway.js"></script>
</head>

<body>
  <canvas id="GameCanvas" oncontextmenu="event.preventDefault()" tabindex="0"></canvas>
  <div id="splash">
    <div class="progress-bar stripes" style="visibility: hidden;">
      <span style="width: 0%"></span>
      <p style="position: relative">Loading...</p>
    </div>
  </div>
  <img src="./bg.a32a4.jpg" id="bgImg"></img>
  <canvas id="loading-canvas" style="position: absolute; width: 100%; height: 100%; visibility: hidden;" width="1334"
    height="750" oncontextmenu="event.preventDefault()"></canvas>

  <script src="src/settings.89cd9.js" charset="utf-8"></script>

  <script src="main.aca22.js" charset="utf-8"></script>

  <script type="text/javascript">
    ( function () {
      // open web debugger console
      if ( typeof VConsole !== 'undefined' ) {
        window.vConsole = new VConsole();
      }

      var debug = window._CCSettings.debug;
      var splash = document.getElementById( 'splash' );
      splash.style.display = 'block';

      function loadScript( moduleName, cb ) {
        function scriptLoaded() {
          document.body.removeChild( domScript );
          domScript.removeEventListener( 'load', scriptLoaded, false );
          cb && cb();
        };
        var domScript = document.createElement( 'script' );
        domScript.async = true;
        domScript.src = moduleName;
        domScript.addEventListener( 'load', scriptLoaded, false );
        document.body.appendChild( domScript );
      }

      loadScript( debug ? 'cocos2d-js.js' : 'cocos2d-js-min.0de5e.js', function () {

        const isIOS14Device = cc.sys.os === cc.sys.OS_IOS && cc.sys.isBrowser && cc.sys.isMobile && /iPhone OS 14/
          .test( window.navigator.userAgent );
        if ( isIOS14Device ) {
          cc.MeshBuffer.prototype.checkAndSwitchBuffer = function ( vertexCount ) {
            if ( this.vertexOffset + vertexCount > 65535 ) {
              this.uploadData();
              this._batcher._flush();
            }
          };
          cc.MeshBuffer.prototype.forwardIndiceStartToOffset = function () {
            this.uploadData();
            this.switchBuffer();
          }
        }

        if ( CC_PHYSICS_BUILTIN || CC_PHYSICS_CANNON ) {
          loadScript( debug ? 'physics.js' : 'physics-min.b5fcb.js', window.boot );
        } else {
          window.boot();
        }

        cc.director.once( cc.Director.EVENT_AFTER_SCENE_LAUNCH, cleanUpLoading );
        cc.loader.onProgress = function ( completedCount, totalCount, item ) {
          if ( loadingDefines ) {
            loadingDefines.progress = completedCount / totalCount;
          }
        };
      } );
    } )();
  </script>
  <script id="loading-anim-script">
    var myOffsetY = 0;
    window.onload = function () {
      loadingCanvas.height = loadingCanvas.width * ( window.innerHeight / window.innerWidth );
      if ( window.innerHeight > window.innerWidth ) {
        loadingCanvas.style.transform = 'rotate(90deg)';
      }
      loadingCanvas.style.visibility = 'visible';
      myOffsetY = ( loadingCanvas.height - 750 ) / 2;
    };

    var myRequestAnimId;
    var loadingAnimScript = document.getElementById( 'loading-anim-script' );
    var loadingCanvas = document.getElementById( 'loading-canvas' );
    var bgImg = document.getElementById( 'bgImg' )
    var loadingDefines = {
      frameTime: 1 / 60,
      imgs: {
        mc01: {
          dir: 'mc_01.png',
          obj: new Image(),
          loaded: false
        },
        mc02: {
          dir: 'mc_02.png',
          obj: new Image(),
          loaded: false
        },
        mc03: {
          dir: 'mc_03.png',
          obj: new Image(),
          loaded: false
        },
        mc04: {
          dir: 'mc_04.png',
          obj: new Image(),
          loaded: false
        },
        mc05: {
          dir: 'mc_05.png',
          obj: new Image(),
          loaded: false
        },
        mc06: {
          dir: 'mc_06.png',
          obj: new Image(),
          loaded: false
        },
        mc07: {
          dir: 'mc_07.png',
          obj: new Image(),
          loaded: false
        },
        bg: {
          dir: 'background.png',
          obj: new Image(),
          loaded: false
        },
        fg: {
          dir: 'foreground.png',
          obj: new Image(),
          loaded: false
        },
      },
      progress: 0
    };
    var progressBar = document.querySelector( '.progress-bar span' );
    var interval = setInterval( function () {
      loadingDefines.progress = parseFloat( progressBar.style.width ) / 100;
    }, 1000 / 60 );

    var cleanUpLoading = function () {
      document.body.removeChild( loadingCanvas );
      window.cancelAnimationFrame( myRequestAnimId );
      clearInterval( interval );
      progressBar = null;
      myRequestAnimId = null;
      myOffsetY = null;
      loadingCanvas = null;
      loadingDefines = null;
      cleanUpLoading = null;
      document.body.removeChild( loadingAnimScript );
      document.body.removeChild( bgImg );
      loadingAnimScript = null;
    };

    ( function () {
      var canvas = loadingCanvas;
      var ctx = canvas.getContext( '2d' );
      var start = Date.now();

      function loadImage( onComplete ) {
        var total = 0;
        var count = 0;
        var successCount = 0;
        for ( var key in loadingDefines.imgs ) {
          var image = loadingDefines.imgs[ key ];
          if ( !image.loaded ) {
            total++;
            image.obj.src = 'imgs/' + image.dir;
            image.obj.onload = function () {
              count++;
              successCount++;
              if ( count == total ) {
                onComplete( successCount == total );
              }
            };

            image.obj.onerror = function () {
              count++;
              if ( count == total ) {
                onComplete( successCount == total );
              }
            };
          }
        }
      }

      function animateLoading() {
        var mc = new animation( [
          loadingDefines.imgs.mc01.obj,
          loadingDefines.imgs.mc02.obj,
          loadingDefines.imgs.mc03.obj,
          loadingDefines.imgs.mc04.obj,
          loadingDefines.imgs.mc05.obj,
          loadingDefines.imgs.mc06.obj,
          loadingDefines.imgs.mc07.obj,
        ], 8 );
        var bg = new animation( [
          loadingDefines.imgs.bg.obj,
        ] );
        var fg = new animation( [
          loadingDefines.imgs.fg.obj,
        ] );
        fg.render = function () {
          var img = this.imgs[ this.frameIndex ];
          ctx.drawImage( img, 0, 0, img.width * loadingDefines.progress, img.height, this.x, this.y + myOffsetY, img
            .width * this.scale * loadingDefines.progress, img.height * this.scale );
        }.bind( fg );

        mc.setPos( canvas.width / 2 - 514.5, canvas.height / 2 - 63 );
        bg.setPos( canvas.width / 2 - 465, canvas.height / 2 - 60 );
        fg.setPos( canvas.width / 2 - 465, canvas.height / 2 - 60 );

        function loop() {
          var current = Date.now();
          var dt = ( current - start ) / 1000;
          start = current;

          ctx.clearRect( 0, 0, canvas.width, canvas.height );

          mc.setPos( canvas.width / 2 - 514.5 + 915 * loadingDefines.progress, mc.y );

          bg.update( dt );
          fg.update( dt );
          mc.update( dt );

          myRequestAnimId = window.requestAnimationFrame( loop );
        }

        myRequestAnimId = window.requestAnimationFrame( loop );
      }

      function animation( imgs, eachFrameCount = 1, scale = 1.5 ) {
        this.imgs = imgs;
        this.eachFrameCount = eachFrameCount;
        this.scale = scale;
        this.x = 0;
        this.y = 0;
        this.rotate = 0;
        this.frameIndex = 0;
        this.time = 0;
        this.timePerFrame = loadingDefines.frameTime * this.eachFrameCount;

        this.setPos = function ( x, y ) {
          this.x = x;
          this.y = y;
        };

        this.update = function ( dt ) {
          this.time += dt;
          if ( this.time >= this.timePerFrame ) {
            var step = Math.floor( this.time / this.timePerFrame );
            this.time %= this.timePerFrame;
            this.frameIndex = ( this.frameIndex + step ) % this.imgs.length;
          }
          this.render();
        };

        this.render = function () {
          var img = this.imgs[ this.frameIndex ];
          ctx.drawImage( img, 0, 0, img.width, img.height, this.x, this.y + myOffsetY, img.width * this.scale, img
            .height * this.scale );
        };
      }

      loadImage( function ( isLoaded ) {
        if ( isLoaded ) {
          animateLoading();
        }
      } );
    } )();
  </script>
</body>

</html>